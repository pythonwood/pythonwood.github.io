<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Linux迷+Python粉 - 系统</title><link href="https://pythonwood.github.io/" rel="alternate"></link><link href="https://pythonwood.github.io/tag/xi-tong/feed/atom/index.html" rel="self"></link><id>https://pythonwood.github.io/</id><updated>2018-04-27T19:00:00+08:00</updated><entry><title>XUbuntu18.04（Bionic河狸）正式发布，系统安装升级记录</title><link href="https://pythonwood.github.io/2018/04/XUbuntu18.04%EF%BC%88Bionic%E6%B2%B3%E7%8B%B8%EF%BC%89%E6%AD%A3%E5%BC%8F%E5%8F%91%E5%B8%83%EF%BC%8C%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E5%8D%87%E7%BA%A7%E8%AE%B0%E5%BD%95/" rel="alternate"></link><published>2018-04-27T19:00:00+08:00</published><updated>2018-04-27T19:00:00+08:00</updated><author><name>pythonwood</name></author><id>tag:pythonwood.github.io,2018-04-27:/2018/04/XUbuntu18.04（Bionic河狸）正式发布，系统安装升级记录/</id><summary type="html">&lt;p&gt;Ubuntu&amp;nbsp;18.04发布时间是（美国）4月26号，彼时的中国已经是27号，就是今天。我花了一天时间折腾升级旧Ubuntu系统到刚发布的最新版。&lt;/p&gt;
&lt;p&gt;多年使用linux经验已经使得这个过程驾轻就熟，闲庭信步:)。为了不忘记，将有沉淀价值的部分，简要记录一下。&lt;/p&gt;
&lt;h2 id="linuxubuntu"&gt;偶然得知Linux，成为Ubuntu多年用户&lt;a class="headerlink" href="#linuxubuntu" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id="ubuntults"&gt;建议：只使用Ubuntu的&lt;span class="caps"&gt;LTS&lt;/span&gt;版本（长期维护 …&lt;/h3&gt;</summary><content type="html">&lt;p&gt;Ubuntu&amp;nbsp;18.04发布时间是（美国）4月26号，彼时的中国已经是27号，就是今天。我花了一天时间折腾升级旧Ubuntu系统到刚发布的最新版。&lt;/p&gt;
&lt;p&gt;多年使用linux经验已经使得这个过程驾轻就熟，闲庭信步:)。为了不忘记，将有沉淀价值的部分，简要记录一下。&lt;/p&gt;
&lt;h2 id="linuxubuntu"&gt;偶然得知Linux，成为Ubuntu多年用户&lt;a class="headerlink" href="#linuxubuntu" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id="ubuntults"&gt;建议：只使用Ubuntu的&lt;span class="caps"&gt;LTS&lt;/span&gt;版本（长期维护）&lt;a class="headerlink" href="#ubuntults" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;我的Ubuntu升级之路是10.04 -&amp;gt; 14.04 -&amp;gt; 18.0，中间的&lt;span class="caps"&gt;LTS&lt;/span&gt;版本12.04和16.04因在升级后不满意而没用，回滚恢复降版本。如果升级前没有备份，就没法恢复。系统升级前备份旧系统的准备很重要，让你可以安心折腾走得更远。这次也是花了很长时间全备份的。如果失败需要恢复系统可参考&lt;a href="https://pythonwood.github.io/2017/11/树莓派SD卡Linux系统盘复制，10分钟克隆新机/" title="树莓派SD卡Linux系统盘复制，10分钟克隆新机"&gt;关于linux系统备份与恢复的随笔&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="xubuntu1804bionic"&gt;期待已久的XUbuntu18.04（Bionic河狸）正式发布&lt;a class="headerlink" href="#xubuntu1804bionic" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;新系统意味着更好的驱动，更好的软件版本，比如ubuntu14.04驱动&lt;span class="caps"&gt;RTL8723BE&lt;/span&gt;这种网卡会偶尔掉线。不幸，我的一台笔记本就是&lt;span class="caps"&gt;RTL8723BE&lt;/span&gt;网卡的。显然大版本升级 14.04 -&amp;gt; 18.04 能巧妙地不折腾而解决很多旧问题（再比如http2支持）。因此，我是带着期待在等待Ubuntu18.04发布的，同时这次升级也没有退路（14.04太老了）。幸好，升级还算满意。已经用上了最新Ubuntu了，并且速度还可以，在换&lt;span class="caps"&gt;SSD&lt;/span&gt;盘后的酷睿I3老机上运行顺畅。&lt;/p&gt;
&lt;h4 id="ubuntu-1804-xubutnu"&gt;Ubuntu 18.04 桌面截图(XUbutnu)&lt;a class="headerlink" href="#ubuntu-1804-xubutnu" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;&lt;img alt="XUbutnu18.04桌面截图" src="https://pythonwood.github.io/uploads/2018/2018-04-27XUbutnu18.04桌面截图.jpg" title="XUbutnu18.04桌面截图"&gt;&lt;/p&gt;
&lt;h2 id="ubutnu1804-xfce"&gt;Ubutnu18.04安装升级过程 （Xfce版本）&lt;a class="headerlink" href="#ubutnu1804-xfce" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id="10-ubutnuxubuntu"&gt;1.0 选择并下载Ubutnu版本(XUbuntu)&lt;a class="headerlink" href="#10-ubutnuxubuntu" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;旧系统是配搭Xfce桌面的&lt;a href="https://pythonwood.github.io/2014/07/笔记本系统转换Linux一个半月——xubuntu14.04截图纪念里程碑/" title="xubuntu14.04截图纪念"&gt;XUbuntu14.04&lt;/a&gt;，Xfce同时也是Linus本人选择&lt;a href="https://linux.cn/article-202-1.html" title="Linus Torvalds 弃 GNOME 3 用 Xfce"&gt;Linus Torvalds 弃 &lt;span class="caps"&gt;GNOME&lt;/span&gt; 3 用 Xfce&lt;/a&gt;。XUbuntu里面的好软件有很多，比如文件管理器Thunar，截图软件xfce4-screenshooter，网速提示器xfce4-netload-plugin，&lt;span class="caps"&gt;CPU&lt;/span&gt;内存提示器xfce4-systemload-plugin等等。同时Ubuntu18的Xfce比原版&lt;span class="caps"&gt;ISO&lt;/span&gt;文件轻量很多。
&lt;img alt="Ubuntu18的Xfce比原版ISO文件轻量很多" src="https://pythonwood.github.io/uploads/2018/2018-04-27Ubuntu18的Xfce比原版ISO文件轻量很多.jpg"&gt;&lt;/p&gt;
&lt;h3 id="20"&gt;2.0 升级前先备份&lt;a class="headerlink" href="#20" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id="21-deb"&gt;2.1 备份已安装过的deb包名称列表&lt;a class="headerlink" href="#21-deb" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="nt"&gt;zcat&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;log&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;apt&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;history&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;log&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;gz&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="nt"&gt;grep&lt;/span&gt; &lt;span class="nt"&gt;Commandline&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="o"&gt;;&lt;/span&gt;  &lt;span class="nt"&gt;zcat&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;log&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;apt&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;history&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;log&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;gz&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="nt"&gt;grep&lt;/span&gt; &lt;span class="nt"&gt;Commandline&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;~/&lt;/span&gt;&lt;span class="nt"&gt;deb&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;list&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;txt&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="22-pythonrubyperl"&gt;2.2 备份已安装过的python包名称列表（无则忽略，ruby，perl等备份操作同理）&lt;a class="headerlink" href="#22-pythonrubyperl" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;( pip2 list ; pip3 list ) &amp;gt; ~/pip.list.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="23-etcvar-rootetcvar"&gt;2.3 /etc,/var一些关键目录备份, root权限执行（/etc是配置文件仓库，/var包含各用户的定时任务)&lt;a class="headerlink" href="#23-etcvar-rootetcvar" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cd /; sudo tar czf ~/etc.tar.gz etc var/spool/cron/crontabs
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="24"&gt;2.4 繁重但强烈建议的全盘备份&lt;a class="headerlink" href="#24" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;备份方法多种：rsync同步到安全盘备份 或 tar打包放到安全目录下 或&amp;nbsp;dd复制分区为文件保存到安全目录下。&lt;/p&gt;
&lt;h3 id="30"&gt;3.0 分区、格式化、安装&lt;a class="headerlink" href="#30" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id="31-ubuntu1804"&gt;3.1 方式一：从新硬盘或空白分区安装ubuntu18.04&lt;a class="headerlink" href="#31-ubuntu1804" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;linux分区不是越多越好的，推荐 / + /home 模式， 实用而不折腾，&amp;nbsp;一个分区代表系统，一个分区代表用户数据空间。这样的好处就是为后续升级带来方便。&lt;/p&gt;
&lt;p&gt;根 / 分区给15G已经完全足够，绰绰有余了。&amp;nbsp;把剩余空间都给/home，因为/分区使用量不会明显增加，/home分区放的东西却会成倍的增加。&lt;/p&gt;
&lt;p&gt;多年之后我目前用的分区方式，window与linux双系统共存的分区方式。msdos方式只能4主分区，刚好用完：
&lt;img alt="Ubuntu安装推荐分区" src="https://pythonwood.github.io/uploads/2018/2018-04-27Ubuntu安装推荐分区.jpg" title="Ubuntu安装推荐分区"&gt;&lt;/p&gt;
&lt;h4 id="32-linux"&gt;3.2 方式二：从旧linux系统升级&lt;a class="headerlink" href="#32-linux" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;告诫：不要尝试从命令&lt;code&gt;sudo apt-get dist-upgrade&lt;/code&gt;升级，结局一般都是不能自动处理错误而中止升级，系统可能因此寿终正寝，只留下无辜的你。这和不要尝试用系统升级方法装windows是一样的。&lt;/p&gt;
&lt;p&gt;参考升级方法：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;之前已有linux分区是 / + /home 模式，先把 &amp;ldquo;/&amp;rdquo; 所在分区格式化，然后将整个ubuntu18.04安装 &amp;ldquo;/&amp;rdquo;&amp;nbsp;所在区。&lt;/li&gt;
&lt;li&gt;系统安装后重启进入ubuntu18.04系统，原 &amp;ldquo;/home&amp;rdquo; 分区不会挂载。&amp;nbsp;总过程已经完成一半了。&lt;/li&gt;
&lt;li&gt;再挂载并将原 &amp;ldquo;/home&amp;rdquo; 分区清理瘦身一下，删除家目录中.thumbnails,&amp;nbsp;.cache这些可能冲突或不大重要的用户数据。&lt;/li&gt;
&lt;li&gt;将新/home目录内容rsync同步到旧 &amp;ldquo;/home&amp;rdquo;&amp;nbsp;分区所在目录里。&lt;/li&gt;
&lt;li&gt;修改/etc/fstab，增加1行让系统重启后挂载原 &amp;ldquo;/home&amp;rdquo;&amp;nbsp;盘。确认无误后重启就完成全部过程。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这样的好处是家目录中的图片、视频、工作文件、工作目录等用户资料依然在那里，变了的只是系统部分，优雅完成升级。&lt;/p&gt;
&lt;h3 id="40-ubuntu1804"&gt;4.0 安装Ubuntu18.04系统之后的优化&lt;a class="headerlink" href="#40-ubuntu1804" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id="41-ubuntu1804"&gt;4.1 Ubuntu18.04修改源&lt;a class="headerlink" href="#41-ubuntu1804" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;原来的url是cn.archive.ubuntu.com， 速度下载包时有&lt;span class="caps"&gt;3MB&lt;/span&gt;以上。其实不换也是可以的。&lt;/p&gt;
&lt;p&gt;如果要换， 以阿里举例， 修改/etc/apt/sources.list文件内容即可（修改前备份），&amp;nbsp;改其他第三方的同理该域名即可。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://mirrors.aliyun.com/ubuntu/&lt;/span&gt; &lt;span class="kp"&gt;bionic&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt; &lt;span class="kp"&gt;restricted&lt;/span&gt;

&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://mirrors.aliyun.com/ubuntu/&lt;/span&gt; &lt;span class="kp"&gt;bionic-updates&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt; &lt;span class="kp"&gt;restricted&lt;/span&gt;

&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://mirrors.aliyun.com/ubuntu/&lt;/span&gt; &lt;span class="kp"&gt;bionic&lt;/span&gt; &lt;span class="kp"&gt;universe&lt;/span&gt;
&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://mirrors.aliyun.com/ubuntu/&lt;/span&gt; &lt;span class="kp"&gt;bionic-updates&lt;/span&gt; &lt;span class="kp"&gt;universe&lt;/span&gt;

&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://mirrors.aliyun.com/ubuntu/&lt;/span&gt; &lt;span class="kp"&gt;bionic&lt;/span&gt; &lt;span class="kp"&gt;multiverse&lt;/span&gt;
&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://mirrors.aliyun.com/ubuntu/&lt;/span&gt; &lt;span class="kp"&gt;bionic-updates&lt;/span&gt; &lt;span class="kp"&gt;multiverse&lt;/span&gt;

&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://mirrors.aliyun.com/ubuntu/&lt;/span&gt; &lt;span class="kp"&gt;bionic-backports&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt; &lt;span class="kp"&gt;restricted&lt;/span&gt; &lt;span class="kp"&gt;universe&lt;/span&gt; &lt;span class="kp"&gt;multiverse&lt;/span&gt;

&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://mirrors.aliyun.com/ubuntu&lt;/span&gt; &lt;span class="kp"&gt;bionic-security&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt; &lt;span class="kp"&gt;restricted&lt;/span&gt;
&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://mirrors.aliyun.com/ubuntu&lt;/span&gt; &lt;span class="kp"&gt;bionic-security&lt;/span&gt; &lt;span class="kp"&gt;universe&lt;/span&gt;
&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://mirrors.aliyun.com/ubuntu&lt;/span&gt; &lt;span class="kp"&gt;bionic-security&lt;/span&gt; &lt;span class="kp"&gt;multiverse&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id="42-ubuntu1804"&gt;4.2 Ubuntu18.04调整用户界面、桌面工具栏、安装字体、重新安装历史包等&lt;a class="headerlink" href="#42-ubuntu1804" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id="421-xp"&gt;4.2.1 调整桌面工具栏到下面，下重上轻的风格看起来比较稳重。也是xp时代传下的习惯。&lt;a class="headerlink" href="#421-xp" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;h5 id="xubutnu1804ubuntubionic-beaver"&gt;&lt;strong&gt;XUbutnu18.04截图(Ubuntu)，这个版本别名&amp;rdquo;Bionic Beaver&amp;rdquo;仿生河狸&lt;/strong&gt;&lt;a class="headerlink" href="#xubutnu1804ubuntubionic-beaver" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h5&gt;
&lt;p&gt;&lt;img alt="XUbutnu18.04程序截图" src="https://pythonwood.github.io/uploads/2018/2018-04-27XUbutnu18.04程序截图.jpg" title="XUbutnu18.04程序截图"&gt;&lt;/p&gt;
&lt;h4 id="422-cpu"&gt;4.2.2 在桌面地板面板工具栏上，添加自定义显示比如网速，&lt;span class="caps"&gt;CPU&lt;/span&gt;，内存等。&lt;a class="headerlink" href="#422-cpu" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;添加网速提示器xfce4-netload-plugin，&lt;span class="caps"&gt;CPU&lt;/span&gt;内存提示器xfce4-systemload-plugin后的工具栏随时可获知负载网速这些计算机情况，用户体验比windows更赞！
&lt;img alt="XUbuntu已设置显示网速和CPU内存负载的工具栏" src="https://pythonwood.github.io/uploads/2018/2018-04-27XUbuntu已设置显示网速和CPU内存负载的工具栏.jpg" title="XUbuntu已设置显示网速和CPU内存负载的工具栏"&gt;&lt;/p&gt;
&lt;h4 id="423"&gt;4.2.3 安装谷歌拼音，文泉驿字体，调整系统字体大小等&lt;a class="headerlink" href="#423" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;Ubuntu18.04默认安装fcitx-sunpinyin也好用，用起来和googlepinyin差不多。所以……我还是选大款的好了。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get install fcitx-googlepinyin fonts-wqy*
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="424"&gt;4.2.4 安装以前安装过的软件&lt;a class="headerlink" href="#424" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;之前记录过旧系统安装的软件，现在按需安装回来。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;apt-get install gedit gthumb tmux vim-gtk3 python-pip python3-pip ipython ipython3 iotop iftop sysstat nload iptraf virtualbox virtualbox-ext-pack gparted testdisk fcitx-googlepinyin smplayer vlc gpaint xpaint pinta pelican python-bs4 axel aria2 unzip apt-file gimp remmina retext potool curl geoip-bin phantomjs lynx vim-tiny  gnome-disk-utility sqlite3 python-mysqldb python-pymysql kazam  pitivi gsound-tools flowblade mp3splt-gtk mp3wrap mtp-tools  adb cmake
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id="43-qqctrlaltalinuxxfce-screenshooterqq"&gt;4.3 实现&lt;span class="caps"&gt;QQ&lt;/span&gt;截图功能，快捷键Ctrl+Alt+A框选截屏。(linux下用xfce-screenshooter变身&lt;span class="caps"&gt;QQ&lt;/span&gt;截图神器)&lt;a class="headerlink" href="#43-qqctrlaltalinuxxfce-screenshooterqq" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;不需安装额外软件xfce-screenshooter是XUbuntu自带的，只需操作如下步骤： 打开设置-&amp;gt; 键盘 -&amp;gt; 应用程序快捷键 -&amp;gt; 添加。 然后命令框输入xfce4-screenshooter&amp;nbsp;&amp;ndash;region确认，再按住Ctrl+Alt+A，确认添加即可。&lt;/p&gt;
&lt;p&gt;xfce4-screenshooter这软件很赞，不需安装&lt;span class="caps"&gt;QQ&lt;/span&gt;就能有很好的截图体验。某些时候，linux用户体验可以比windows好，需要使用者本身已经对linux比较上手。
&lt;img alt="在Linux下设置QQ截图功能" src="https://pythonwood.github.io/uploads/2018/2018-04-27在Linux下设置QQ截图功能.jpg" title="在Linux下设置QQ截图功能"&gt;&lt;/p&gt;
&lt;h3 id="50-ubuntu1804"&gt;5.0 安装Ubuntu18.04系统之后的问题解决&lt;a class="headerlink" href="#50-ubuntu1804" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id="51-ubuntu1804shadowsocks"&gt;5.1 Ubuntu18.04启动shadowsocks报错解决&lt;a class="headerlink" href="#51-ubuntu1804shadowsocks" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;原因：openssl升级到1.1.0以上版本，导致shadowsocks启动报undefined symbol:&amp;nbsp;EVP_CIPHER_CTX_cleanup错误&lt;/p&gt;
&lt;p&gt;解决：&amp;nbsp;将py文件中所有的EVP_CIPHER_CTX_cleanup改为EVP_CIPHER_CTX_reset&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo vim /usr/local/lib/python2.7/dist-packages/shadowsocks/crypto/openssl.py  # 按实际路径改
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="52-ubuntu1804wpserror-while-loading-shared-libraries-libpng12so0"&gt;5.2 Ubuntu18.04安装wps（解决报错error while loading shared libraries: libpng12.so.0)&lt;a class="headerlink" href="#52-ubuntu1804wpserror-while-loading-shared-libraries-libpng12so0" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;第一步下载wps-office_10.1.0.5672~a21_amd64.deb, libpng12-0_1.2.54-1ubuntu1_amd64.deb,&amp;nbsp;wps_symbol_fonts.zip（window字体非必须）文件备用。&lt;/p&gt;
&lt;p&gt;第二步运行命令安装：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo dpkg -i wps-office_10.1.0.5672~a21_amd64.deb libpng12-0_1.2.54-1ubuntu1_amd64.deb
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="53-panel"&gt;5.3 底部面板panel出现重复的网络图标解决&lt;a class="headerlink" href="#53-panel" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;&lt;img alt="panel面板重复出现network图标" src="https://pythonwood.github.io/uploads/2018/2018-05-09面板显示重复网络图标.png" title="panel面板重复出现network图标"&gt;&lt;/p&gt;
&lt;p&gt;解决：设置 - 会话与启动 - 程序自启动 - 取消勾选network项。 注销，再登录，重新勾选，注销，再登录。&amp;nbsp;图标恢复只有一个。&lt;/p&gt;
&lt;h3 id="60-ubuntu1804"&gt;6.0 安装Ubuntu18.04总结提升&lt;a class="headerlink" href="#60-ubuntu1804" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;升级过程比较有把握，遇到的问题都是典型缺so文件这些小问题，通过谷歌搜索就能解决。&lt;/p&gt;
&lt;p&gt;某些时候，linux用户体验可以比windows好，需要使用者本身已经对linux比较上手。&lt;/p&gt;</content><category term="Ubuntu"></category><category term="18.04"></category><category term="linux"></category><category term="系统"></category><category term="安装"></category></entry><entry><title>树莓派初始化环境搭建的一些事</title><link href="https://pythonwood.github.io/2017/12/%E6%A0%91%E8%8E%93%E6%B4%BE%E5%88%9D%E5%A7%8B%E5%8C%96%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E7%9A%84%E4%B8%80%E4%BA%9B%E4%BA%8B/" rel="alternate"></link><published>2017-12-05T13:46:00+08:00</published><updated>2017-12-05T13:46:00+08:00</updated><author><name>pythonwood</name></author><id>tag:pythonwood.github.io,2017-12-05:/2017/12/树莓派初始化环境搭建的一些事/</id><summary type="html">&lt;p&gt;第二波研究树莓派功能了，上次主要是当作linux系统来研究，这次当作只能设备来研究。是奔着遥控式家庭影音的方案来研究的，树莓派的基础环境非常重要，所以从新理一理，记录下来。&lt;/p&gt;
&lt;h3 id="_1"&gt;一、奔着遥控式家庭影音的购买方案&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;经比较，树莓派在京东是挺贵的，鉴于是标准化带电子产品，去天猫买&lt;a href="https://s.click.taobao.com/t?e=m%3D2%26s%3Di1ZaWZT35VIcQipKwQzePOeEDrYVVa64K7Vc7tFgwiHjf2vlNIV67pR2%2B%2F9Hp9mCHGUKWrwhgPms9V29auOuBOBgn3DwXo5fTavSczFePlBPv%2F0P2woSTIiNFfNqYeZfZqRIxUL2qmOWt8ptzziuV9VDE9N5gf5%2FRemoLTADB2DGJe8N%2FwNpGw%3D%3D&amp;amp;pvid=10_120.239.178.0_551_1512529291425" title="树莓派天猫链接"&gt;树莓派&lt;/a&gt;可以了。我没买&lt;span class="caps"&gt;SD&lt;/span&gt;卡，将旧的class10的16G的&lt;span class="caps"&gt;SD …&lt;/span&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;第二波研究树莓派功能了，上次主要是当作linux系统来研究，这次当作只能设备来研究。是奔着遥控式家庭影音的方案来研究的，树莓派的基础环境非常重要，所以从新理一理，记录下来。&lt;/p&gt;
&lt;h3 id="_1"&gt;一、奔着遥控式家庭影音的购买方案&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;经比较，树莓派在京东是挺贵的，鉴于是标准化带电子产品，去天猫买&lt;a href="https://s.click.taobao.com/t?e=m%3D2%26s%3Di1ZaWZT35VIcQipKwQzePOeEDrYVVa64K7Vc7tFgwiHjf2vlNIV67pR2%2B%2F9Hp9mCHGUKWrwhgPms9V29auOuBOBgn3DwXo5fTavSczFePlBPv%2F0P2woSTIiNFfNqYeZfZqRIxUL2qmOWt8ptzziuV9VDE9N5gf5%2FRemoLTADB2DGJe8N%2FwNpGw%3D%3D&amp;amp;pvid=10_120.239.178.0_551_1512529291425" title="树莓派天猫链接"&gt;树莓派&lt;/a&gt;可以了。我没买&lt;span class="caps"&gt;SD&lt;/span&gt;卡，将旧的class10的16G的&lt;span class="caps"&gt;SD&lt;/span&gt;利用上(class10意思是写入速度约&lt;span class="caps"&gt;10MB&lt;/span&gt;/s)。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;我购买并用上的：&lt;/strong&gt; 
&lt;a href="https://s.click.taobao.com/t?e=m%3D2%26s%3DjB5CtrQXlAccQipKwQzePOeEDrYVVa64K7Vc7tFgwiHjf2vlNIV67rCnyOxJms%2BVtTN3K9waqqis9V29auOuBOBgn3DwXo5fTavSczFePlBPv%2F0P2woSTBN3oW5I7sw9oXcuyoAGSVzy%2Flc8YI1OgQvABqsOAyUlBEellxPfI1OiZ%2BQMlGz6FQ%3D%3D&amp;amp;pvid=10_120.239.178.0_533_1512539397311" title="公牛usb插座天猫链接"&gt;公牛usb魔方插座&lt;/a&gt;，&lt;a href="https://s.click.taobao.com/t?e=m%3D2%26s%3Di1ZaWZT35VIcQipKwQzePOeEDrYVVa64K7Vc7tFgwiHjf2vlNIV67pR2%2B%2F9Hp9mCHGUKWrwhgPms9V29auOuBOBgn3DwXo5fTavSczFePlBPv%2F0P2woSTIiNFfNqYeZfZqRIxUL2qmOWt8ptzziuV9VDE9N5gf5%2FRemoLTADB2DGJe8N%2FwNpGw%3D%3D&amp;amp;pvid=10_120.239.178.0_551_1512529291425" title="树莓派天猫链接"&gt;树莓派&lt;/a&gt;，&lt;a href="https://s.click.taobao.com/t?e=m%3D2%26s%3DyO9jlKzcxlwcQipKwQzePOeEDrYVVa64K7Vc7tFgwiHjf2vlNIV67jeJ0D4P3i%2B8UOZr0mLjuses9V29auOuBOBgn3DwXo5fs9cRaxJdiKw3LnkA3bZiA%2F6gPESVKznnDfaTZ11r%2FGF6awgoXsc5TKo%2FiSVAKeldcSpj5qSCmbA%3D&amp;amp;pvid=10_120.239.178.6_72377_1512026724825" title="华趸hdmi转vga线带音频带供电"&gt;&lt;span class="caps"&gt;HDMI&lt;/span&gt;转&lt;span class="caps"&gt;VGA&lt;/span&gt;带供电&lt;/a&gt;，带开关按钮线的电源，杜邦线。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;不用购买就用上的配件：&lt;/strong&gt;
红外接收仪(从坏的遥控玩具拆下可用)，旧电视遥控器一个，老&lt;span class="caps"&gt;VGA&lt;/span&gt;显示屏，旧音箱。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;我购买而还没用的可选配件：&lt;/strong&gt;
七彩&lt;span class="caps"&gt;RGB&lt;/span&gt;的&lt;span class="caps"&gt;LED&lt;/span&gt;元件，面包板，&lt;a href="https://s.click.taobao.com/t?e=m%3D2%26s%3DfV%2BZ61WfxfkcQipKwQzePOeEDrYVVa64K7Vc7tFgwiHjf2vlNIV67lKP%2BmjvssA7r8hK%2FDw%2Bbm2s9V29auOuBOBgn3DwXo5fs9cRaxJdiKw3LnkA3bZiA0KFaRH2Tl0r%2BlUnyCWbT92Wt8ptzziuVx4DebA4okkCqN5EGMnCL1bGJe8N%2FwNpGw%3D%3D&amp;amp;pvid=10_120.239.178.0_378_1512536718652" title="HDMI转DVI天猫链接"&gt;&lt;span class="caps"&gt;HDMI&lt;/span&gt;转&lt;span class="caps"&gt;DVI&lt;/span&gt;&lt;/a&gt;，光敏电阻。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;我认为不用买的：&lt;/strong&gt;&amp;nbsp;小屏幕（退货了），温度感应，五向摇杆，蜂鸣器，触摸感应器等。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img alt="房间树莓派媒体中心" src="https://pythonwood.github.io/uploads/2017/房间树莓派媒体中心.jpg" title="房间树莓派媒体中心"&gt;&lt;/p&gt;
&lt;h3 id="raspbian"&gt;二、树莓派安装官方的raspbian系统并初始化&lt;a class="headerlink" href="#raspbian" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id="_2"&gt;基础部分教程：&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;包括修改Pi密码,修改国内源,显示中文，设置时区为Asia/Shanghai，安装开源中文字体&lt;strong&gt;文泉驿&lt;/strong&gt;，安装fcitx谷歌拼音，开启ssh服务，设置wifi连接密码&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;树莓派上手配置&lt;/strong&gt;&amp;nbsp;https://yaogangli.gitbooks.io/raspberry-pi-learning/content/Raspbian.html&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;新手入门树莓派必做的四件事&lt;/strong&gt;&amp;nbsp;http://blog.csdn.net/A_lPha/article/details/53116767&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;How to setup multiple WiFi networks?&lt;/strong&gt;&amp;nbsp;https://raspberrypi.stackexchange.com/questions/11631/how-to-setup-multiple-wifi-networks/11674&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ssh服务配置&lt;/strong&gt;&amp;nbsp;https://www.raspberrypi.org/documentation/remote-access/ssh/&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id="_3"&gt;优化部分教程：&lt;a class="headerlink" href="#_3" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;包括添加u盘自动挂载功能，&lt;span class="caps"&gt;VNC&lt;/span&gt;服务，优化无网络下树莓派开机时间等&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;树莓派&lt;span class="caps"&gt;USB&lt;/span&gt;存储设备自动挂载&lt;/strong&gt;&amp;nbsp;http://www.jianshu.com/p/188828d9777a&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;How to change timeout in systemctl&lt;/strong&gt;&amp;nbsp;https://unix.stackexchange.com/questions/186162/how-to-change-timeout-in-systemctl&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;安装&lt;span class="caps"&gt;VNC&lt;/span&gt;服务(tightvncserver)&lt;/strong&gt;&amp;nbsp;https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-on-ubuntu-14-04&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;配置与学习树莓派config.txt配置文件&lt;/strong&gt;&amp;nbsp;https://www.zybuluo.com/SiberiaBear/note/328982&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="_4"&gt;三、重要提醒：&lt;a class="headerlink" href="#_4" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;经验证，我安装一大堆东西后，&lt;span class="caps"&gt;SD&lt;/span&gt;卡使用才4G，其中几百兆是音乐，&amp;nbsp;所以8G卡也是够用的。&lt;/p&gt;
&lt;p&gt;熟悉Linux环境的话，完成一台树莓派环境配置之后，可随时备份，其它树莓派克隆环境就可以了。具体方法参考另一篇随笔。 
&lt;a href="https://pythonwood.github.io/2017/11/树莓派SD卡Linux系统盘复制，10分钟克隆新机/"&gt;树莓派&lt;span class="caps"&gt;SD&lt;/span&gt;卡Linux系统盘复制，10分钟克隆新机&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="_5"&gt;四、参考&lt;a class="headerlink" href="#_5" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;开始 Raspberry Pi 项目前需要知道的 10 件事&amp;nbsp;https://www.digikey.com.cn/zh/articles/techzone/2017/feb/10-things-to-know-before-starting-a-raspberry-pi-project&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;树莓派启动那些事&amp;nbsp;http://elmagnificogi.github.io/tags/#RaspberryPi&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</content><category term="树莓派"></category><category term="初始化"></category><category term="系统"></category><category term="环境搭建"></category></entry><entry><title>树莓派SD卡Linux系统盘复制，10分钟克隆新机，raspbain备份恢复</title><link href="https://pythonwood.github.io/2017/11/%E6%A0%91%E8%8E%93%E6%B4%BESD%E5%8D%A1Linux%E7%B3%BB%E7%BB%9F%E7%9B%98%E5%A4%8D%E5%88%B6%EF%BC%8C10%E5%88%86%E9%92%9F%E5%85%8B%E9%9A%86%E6%96%B0%E6%9C%BA/" rel="alternate"></link><published>2017-11-30T15:02:00+08:00</published><updated>2017-12-05T10:12:00+08:00</updated><author><name>pythonwood</name></author><id>tag:pythonwood.github.io,2017-11-30:/2017/11/树莓派SD卡Linux系统盘复制，10分钟克隆新机/</id><summary type="html">&lt;p&gt;有旧和新树莓派二个，发现&lt;span class="caps"&gt;SD&lt;/span&gt;卡的raspbian系统可在不同树莓派之间通用，挺好。&lt;/p&gt;
&lt;h3 id="_1"&gt;学通树莓派系统克隆，兼备安装、备份与恢复能力。&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;在家里，用了一周时间，将新买的树莓派3，&lt;a href="https://s.click.taobao.com/t?e=m%3D2%26s%3DyO9jlKzcxlwcQipKwQzePOeEDrYVVa64K7Vc7tFgwiHjf2vlNIV67jeJ0D4P3i%2B8UOZr0mLjuses9V29auOuBOBgn3DwXo5fs9cRaxJdiKw3LnkA3bZiA%2F6gPESVKznnDfaTZ11r%2FGF6awgoXsc5TKo%2FiSVAKeldcSpj5qSCmbA%3D&amp;amp;pvid=10_120.239.178.6_72377_1512026724825" title="华趸hdmi转vga线带音频带供电"&gt;&lt;span class="caps"&gt;HDMI&lt;/span&gt;转&lt;span class="caps"&gt;VGA&lt;/span&gt;带供电&lt;/a&gt;(性价比推荐)，旧显示屏，旧音箱。组成家庭媒体中心。手机使用bubbleupnp投屏和推送音乐播放 …&lt;/p&gt;</summary><content type="html">&lt;p&gt;有旧和新树莓派二个，发现&lt;span class="caps"&gt;SD&lt;/span&gt;卡的raspbian系统可在不同树莓派之间通用，挺好。&lt;/p&gt;
&lt;h3 id="_1"&gt;学通树莓派系统克隆，兼备安装、备份与恢复能力。&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;在家里，用了一周时间，将新买的树莓派3，&lt;a href="https://s.click.taobao.com/t?e=m%3D2%26s%3DyO9jlKzcxlwcQipKwQzePOeEDrYVVa64K7Vc7tFgwiHjf2vlNIV67jeJ0D4P3i%2B8UOZr0mLjuses9V29auOuBOBgn3DwXo5fs9cRaxJdiKw3LnkA3bZiA%2F6gPESVKznnDfaTZ11r%2FGF6awgoXsc5TKo%2FiSVAKeldcSpj5qSCmbA%3D&amp;amp;pvid=10_120.239.178.6_72377_1512026724825" title="华趸hdmi转vga线带音频带供电"&gt;&lt;span class="caps"&gt;HDMI&lt;/span&gt;转&lt;span class="caps"&gt;VGA&lt;/span&gt;带供电&lt;/a&gt;(性价比推荐)，旧显示屏，旧音箱。组成家庭媒体中心。手机使用bubbleupnp投屏和推送音乐播放，听音乐的享受更舒服了，显示屏再大些就更好。&lt;/p&gt;
&lt;p&gt;&lt;img alt="房间树莓派媒体中心" src="https://pythonwood.github.io/uploads/2017/房间树莓派媒体中心.jpg" title="房间树莓派媒体中心"&gt;&lt;/p&gt;
&lt;p&gt;在工作室，还有一个树莓派和支持&lt;span class="caps"&gt;HDMI&lt;/span&gt;输出的投影仪。如果能复制现有树莓派的系统&lt;span class="caps"&gt;SD&lt;/span&gt;卡，将省事不少。（重复的事应少做）&lt;/p&gt;
&lt;h3 id="_2"&gt;开始折腾尝试&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;借助我的个人电脑是ubutnu，可以看见树莓派分区情况，第二个分区14G采用了3G，很多空间是多余的。&lt;/p&gt;
&lt;p&gt;&lt;img alt="gparted看树莓派分区" src="https://pythonwood.github.io/uploads/2017/gparted看树莓派分区.jpg" title="gparted看树莓派分区"&gt;&lt;/p&gt;
&lt;p&gt;用了1天的不断努力尝试终于才成功，囧。&lt;/p&gt;
&lt;h3 id="1ddddrescue"&gt;失败1:使用&lt;span class="caps"&gt;DD&lt;/span&gt;或ddrescue&lt;a class="headerlink" href="#1ddddrescue" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;不幸的是我是从14.6G卡克隆到14.4G卡，使用dd失败是注定的。使用dd的必要条件是目标卡要更大。&lt;/p&gt;
&lt;h3 id="2linuxssdetc"&gt;失败2:源自笔记本linux系统迁移&lt;span class="caps"&gt;SSD&lt;/span&gt;的经验——分区一样，复制文件，改etc配置法。&lt;a class="headerlink" href="#2linuxssdetc" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;linux磁盘迁移，只需分区格式化，复制文件，修改etc下的fstab和udev目录的网卡信息，chroot+grub安装。就能完成。&lt;/p&gt;
&lt;p&gt;然而实践得知，不适用树莓派迁移。启动时卡在&amp;rdquo;smsc95xx 1-1.1:1.0: eth0: register &amp;lsquo;smsc95xx&amp;rsquo;&amp;nbsp;&amp;hellip;&amp;rdquo;之后。无法启动。&lt;/p&gt;
&lt;p&gt;比较发现，复制时，不会有dev/by-partuuid/目录，而本身树莓派是有这个目录的。&lt;/p&gt;
&lt;h3 id="ddrawresize2fsqemu-imgdiskdd"&gt;成功:dd读取为raw镜像盘、resize2fs缩容分区、qemu-img缩容disk、dd写入成功启动树莓派&lt;a class="headerlink" href="#ddrawresize2fsqemu-imgdiskdd" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id="ddrawsd"&gt;先dd读取物理盘为raw格式镜像盘。这样就可以方法搞，最坏情况也不影响已有的系统sd卡内容。&lt;a class="headerlink" href="#ddrawsd" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$sudo dd if=/dev/sdb of=/home/16G.img bs=128K
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="loopgparted"&gt;挂载loop设备以便于gparted能操作&lt;a class="headerlink" href="#loopgparted" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$sudo losetup /dev/loop0 /home/16G.img
$sudo partprobe /dev/loop0  # 运行后才会出现分区/dev/loop0p1,/dev/loop0p2
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="14g6gblock6g"&gt;第二分区从14G缩容到6G（实际是把分散的Block数据集中到前6G位置。非真正改变分区大小）&lt;a class="headerlink" href="#14g6gblock6g" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$sudo e2fsck -f /dev/loop0p2
$sudo resize2fs /dev/loop0p2 6G
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="gparted-fdisk-6g"&gt;GParted / Fdisk 更改第二分区为6G&lt;a class="headerlink" href="#gparted-fdisk-6g" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;GParted&amp;nbsp;/dev/loop0打开，然后选择第二分区右击，选择&amp;rdquo;更改/移动大小&amp;rdquo;。设置。&lt;/p&gt;
&lt;h4 id="loop"&gt;卸载恢复loop设备:&lt;a class="headerlink" href="#loop" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$sudo partprobe -d /dev/loop0
$sudo losetup -d /dev/loop0
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="raw"&gt;raw虚拟磁盘缩容&lt;a class="headerlink" href="#raw" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$sudo qemu-img resize /home/16G.img -8G

$qemu-img info /home/16G.img
image: xxx.img
file format: raw
virtual size: 5.9G (6380060672 bytes)
disk size: 5.9G
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="ddsd"&gt;使用&lt;span class="caps"&gt;DD&lt;/span&gt;写入新&lt;span class="caps"&gt;SD&lt;/span&gt;卡，启动成功。&lt;a class="headerlink" href="#ddsd" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;可选：写入sd后可以用resize2fs扩容分区完全用上&lt;span class="caps"&gt;SD&lt;/span&gt;卡空间，参考上面缩容。&lt;/p&gt;
&lt;h3 id="_3"&gt;总结提升&lt;a class="headerlink" href="#_3" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;linux下安装树莓派系统到&lt;span class="caps"&gt;SD&lt;/span&gt;卡，使用dd刻录后还有剩余空间，用resize2fs可让最后分区来占满。&lt;/li&gt;
&lt;li&gt;使用dd来备份整个硬盘太慢，可以用resize2fs将数据块移动到前面，parted缩小分区，然后刻录硬盘前面有数据部分即可。这样备份文件就不会臃肿。&lt;/li&gt;
&lt;li&gt;备份镜像恢复时，过程类似初次安装系统。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="_4"&gt;参考&lt;a class="headerlink" href="#_4" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;把一块硬盘上的 Linux 系统整个复制到新硬盘上的方法.  &lt;a href="https://www.v2ex.com/t/183310"&gt;https://www.v2ex.com/t/183310&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;openstack文档 &lt;a href="http://docs.ocselected.org/openstack-manuals/kilo/image-guide/content/ch_modifying_images.html#losetup-kpartx-nbd"&gt;http://docs.ocselected.org/openstack-manuals/kilo/image-guide/content/ch_modifying_images.html#losetup-kpartx-nbd&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;使用qemu-img改变镜像文件大小  &lt;a href="http://niusmallnan.com/_build/html/_templates/knowladge/resize_raw_file.html"&gt;http://niusmallnan.com/_build/html/_templates/knowladge/resize_raw_file.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;笔记本硬盘更换记（使用&lt;span class="caps"&gt;LVM&lt;/span&gt;进行在线数据迁移） &lt;a href="http://cathay4t.blogspot.hk/2009/05/lvm.html"&gt;http://cathay4t.blogspot.hk/2009/05/lvm.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;新电脑+旧系统：教你在不同机器间转移Linux  &lt;a href="http://www.geekfan.net/1860/"&gt;http://www.geekfan.net/1860/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;usb-creator-gtk 方法和&amp;nbsp;clonezilla方法没有深入研究。&lt;/p&gt;</content><category term="树莓派"></category><category term="raspbain"></category><category term="linux"></category><category term="克隆"></category><category term="系统"></category><category term="备份"></category><category term="恢复"></category><category term="resize2fs"></category><category term="qemu-img"></category><category term="losetup"></category><category term="dd"></category><category term="智能家庭"></category></entry><entry><title>笔记本系统转换Linux一个半月——xubuntu14.04截图纪念里程碑</title><link href="https://pythonwood.github.io/2014/07/%E7%AC%94%E8%AE%B0%E6%9C%AC%E7%B3%BB%E7%BB%9F%E8%BD%AC%E6%8D%A2Linux%E4%B8%80%E4%B8%AA%E5%8D%8A%E6%9C%88%E2%80%94%E2%80%94xubuntu14.04%E6%88%AA%E5%9B%BE%E7%BA%AA%E5%BF%B5%E9%87%8C%E7%A8%8B%E7%A2%91/" rel="alternate"></link><published>2014-07-05T23:30:00+08:00</published><updated>2017-11-30T22:12:00+08:00</updated><author><name>pythonwood</name></author><id>tag:pythonwood.github.io,2014-07-05:/2014/07/笔记本系统转换Linux一个半月——xubuntu14.04截图纪念里程碑/</id><summary type="html">&lt;h3 id="_1"&gt;前言&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;自学计算机技术，越到后面，越依赖ubuntu，以致于很多时候都是一开机就打开虚拟机上的ubuntu10.04，Linux已经变得越来越重要了。&lt;/p&gt;
&lt;h3 id="_2"&gt;操作&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;2014-04-17，ubuntu14.04(trusty)，长期支持版(&lt;span class="caps"&gt;LTS&lt;/span&gt;=long term support)，还记得那天也是我腾讯实行的2面。我知道等到时机了，果断装双系统 …&lt;/p&gt;</summary><content type="html">&lt;h3 id="_1"&gt;前言&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;自学计算机技术，越到后面，越依赖ubuntu，以致于很多时候都是一开机就打开虚拟机上的ubuntu10.04，Linux已经变得越来越重要了。&lt;/p&gt;
&lt;h3 id="_2"&gt;操作&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;2014-04-17，ubuntu14.04(trusty)，长期支持版(&lt;span class="caps"&gt;LTS&lt;/span&gt;=long term support)，还记得那天也是我腾讯实行的2面。我知道等到时机了，果断装双系统！&amp;nbsp;开始&lt;/p&gt;
&lt;p&gt;用实验室那台ubuntu13.10直接升级，用了几个钟换来开机后一大堆的错误弹框，累觉不爱，说明直接升级是不行的，在此谨记！&lt;/p&gt;
&lt;p&gt;很不喜欢ubuntu后面自己的桌面。拿实验室的继续重装ubuntu-gnome版，还能接受，但却有些太求炫不求实的感觉。&lt;/p&gt;
&lt;p&gt;萌生转kubuntu，feroda, mint,&amp;nbsp;centos等的想法，差点转了mint，唯一觉得debin-&amp;gt;ubuntu-&amp;gt;mint这样子的飘着很难让人放心，比如你相信一个人99%，但很难相信他的孙辈。&lt;/p&gt;
&lt;p&gt;搜索良久，纠结良久，看到开源新闻消息说Linus受不了gnome3的卖炫而投向xfce阵型。我便也跟风转xubuntu，转完后大喜，因为超过我理想期望很多。&lt;/p&gt;
&lt;h3 id="xubuntu1404"&gt;xubuntu14.04优点&lt;a class="headerlink" href="#xubuntu1404" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;一、Olivier&amp;nbsp;Fourdan开发，一个运行在各类Unix下的轻量级桌面环境。&lt;/p&gt;
&lt;p&gt;二、仿win风格的界面，对双系统的人很好&lt;/p&gt;
&lt;p&gt;三、超省资源，开机后htop显示198M已用内存&lt;/p&gt;
&lt;p&gt;四、32Linux内核系统识别了4G的3.97G，win7只识别2.95G，让我惊喜&lt;/p&gt;
&lt;h3 id="xubuntu1404_1"&gt;xubuntu14.04截图&lt;a class="headerlink" href="#xubuntu1404_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;改成windows风格桌面很容易&lt;/p&gt;
&lt;p&gt;&lt;img alt="xubuntu14.04截图" src="https://pythonwood.github.io/uploads/2014/xubuntu14.04截图.jpg"&gt;&lt;/p&gt;
&lt;!--
文件管理器风格也是windows化的



terminal，python爬虫输出信息
--&gt;

&lt;p&gt;更多截图http://www.douban.com/photos/album/132398060/&lt;/p&gt;
&lt;p&gt;&lt;img alt="tu1" src="https://img1.doubanio.com/view/photo/m/public/p2185668349.jpg"&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img alt="tu2" src="https://img3.doubanio.com/view/photo/m/public/p2185668275.jpg"&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img alt="tu3" src="https://img3.doubanio.com/view/photo/m/public/p2185668295.jpg"&gt;&lt;/p&gt;</content><category term="系统"></category><category term="windows"></category><category term="linux"></category><category term="ubuntu"></category><category term="大学"></category></entry><entry><title>虚拟机系统正式转换——从windows到Linux-ubuntu新手</title><link href="https://pythonwood.github.io/2013/07/%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%B3%BB%E7%BB%9F%E6%AD%A3%E5%BC%8F%E8%BD%AC%E6%8D%A2%E2%80%94%E2%80%94%E4%BB%8Ewindows%E5%88%B0Linux-ubuntu%E6%96%B0%E6%89%8B/" rel="alternate"></link><published>2013-07-10T16:29:00+08:00</published><updated>2017-11-30T22:30:00+08:00</updated><author><name>pythonwood</name></author><id>tag:pythonwood.github.io,2013-07-10:/2013/07/虚拟机系统正式转换——从windows到Linux-ubuntu新手/</id><summary type="html">&lt;p&gt;记录大二下学期转换ubuntu10.04的一些系统折腾&lt;/p&gt;
&lt;h3 id="_1"&gt;版本选择：&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;经多次实验，Ubuntu个人认为长期支持（&lt;span class="caps"&gt;LTS&lt;/span&gt;）版才值得装。&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;VMware9中测试：Ubuntu10.04开机内存170M，Ubuntu12.04开机内存340M。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;个人感觉Ubuntu12.04像win7华丽消耗大，Ubuntu10.04像&lt;span class="caps"&gt;XP&lt;/span&gt;，对程序员实在。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Ubuntu12.04的桌面切换真麻烦 …&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;</summary><content type="html">&lt;p&gt;记录大二下学期转换ubuntu10.04的一些系统折腾&lt;/p&gt;
&lt;h3 id="_1"&gt;版本选择：&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;经多次实验，Ubuntu个人认为长期支持（&lt;span class="caps"&gt;LTS&lt;/span&gt;）版才值得装。&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;VMware9中测试：Ubuntu10.04开机内存170M，Ubuntu12.04开机内存340M。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;个人感觉Ubuntu12.04像win7华丽消耗大，Ubuntu10.04像&lt;span class="caps"&gt;XP&lt;/span&gt;，对程序员实在。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Ubuntu12.04的桌面切换真麻烦。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;我最后选择了VMware9+Ubuntu10.04。&lt;/p&gt;
&lt;h3 id="linux-ubuntuvmware"&gt;安装Linux-Ubuntu（VMware平台支持下）：&lt;a class="headerlink" href="#linux-ubuntuvmware" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id="_2"&gt;双系统形式：&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;wubi安装：不用分区，直接在某原分区建立文件来代表Ubuntu，应该是虚拟化技术。安全快捷，易卸载。&lt;/p&gt;
&lt;p&gt;光盘安装：win7原来有4分区，安装Ubuntu后E盘少了7G，无其它变化，推测装在了E盘。&lt;/p&gt;
&lt;h4 id="_3"&gt;单系统：&lt;a class="headerlink" href="#_3" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;安装后占3.6G左右，其中用于虚拟内存交换的空间2G，系统文件/bin/*等只占1G多。&lt;/p&gt;
&lt;h5 id="_4"&gt;安装过程的技巧：&lt;a class="headerlink" href="#_4" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h5&gt;
&lt;p&gt;安装过程所增加的用户只是桌面用户，非超级用户。安装后用sudo root&amp;nbsp;passwd修改root密码。&lt;/p&gt;
&lt;p&gt;计算机名和用户名最好3到6个字符就好了。&lt;/p&gt;
&lt;p&gt;Ubuntu安装过程下载中文语言包时最好跳过，太慢了，装好后自己设置一个快的源，然后下载。&lt;/p&gt;
&lt;h3 id="_5"&gt;常用软件安装：&lt;a class="headerlink" href="#_5" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;极点五笔，个人比较钟意。&lt;/p&gt;
&lt;p&gt;Adobe Flash&amp;nbsp;为了网页（若安装gecko_mediaplayer，则不用）。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Mplayer&amp;nbsp;相传宇宙最强播放器（然后最好gecko_mediaplayer，SMPlayer一起装）。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;wine 用于运行Windows程序。
aMule&amp;nbsp;电骡（官方中译），可选，个人测试不好。&lt;/p&gt;
&lt;p&gt;build-essential&amp;nbsp;程序依赖库。&lt;/p&gt;
&lt;p&gt;g++,nasm,emacs,open-ssh,vnc……&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;gvim&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;就我而言，我更喜欢gvim，即使用了3个月emacs了，但是还是义无反顾地转成vim党了。&lt;/p&gt;
&lt;p&gt;gvim是编辑器之神，emacs是神一样的编辑器。前句强调gvim始终是一个编辑器，后句说明emacs可以做远超编辑器的事。&lt;/p&gt;
&lt;h3 id="-"&gt;使用－习惯：&lt;a class="headerlink" href="#-" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Ubuntu12.04开机都会打开终端（Terminal）,在第二桌面。比较喜欢linux的多虚拟桌面功能。&lt;/p&gt;
&lt;p&gt;firefox总是在第三桌面打开，影音在第四桌面。&lt;/p&gt;
&lt;p&gt;将常打开的程序放在面板上。&lt;/p&gt;
&lt;h3 id="_6"&gt;终端：&lt;a class="headerlink" href="#_6" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;输入密码不以星号表示，无显示，惯了就好。桌面窗口环境则由星号表示。&lt;/p&gt;
&lt;p&gt;最常用的键：Tab；方向上；Ctrl+C；&amp;nbsp;补全，重复历史，强制终止。&lt;/p&gt;
&lt;p&gt;最常用命令：ls；cat；history&amp;nbsp;；                              &lt;/p&gt;
&lt;p&gt;最好用的符号：|；&amp;lt;；&amp;gt;；  &lt;/p&gt;
&lt;p&gt;Ctrl＋A/D/L/R：&amp;nbsp;到行首/行尾/清屏/查找命令历史&lt;/p&gt;
&lt;h3 id="win7linux"&gt;Win7/Linux字符编码问题：&lt;a class="headerlink" href="#win7linux" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id="win7linux_1"&gt;Win7/Linux编码差异：&lt;a class="headerlink" href="#win7linux_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;win7的多字符实现：&lt;span class="caps"&gt;GBK&lt;/span&gt;，2字节；Unicode：unicode16，2字节。Linux的多字符实现：utf8，1-6字节；Unicode：unicode32，4字节。&lt;/p&gt;
&lt;h3 id="_7"&gt;换行符问题：&lt;a class="headerlink" href="#_7" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;win7换行＝\r\n 而Linux换行＝\n；所以Linux文本在win7下用记事本打开都是一行的。转换很简单用fromdos / todos&amp;nbsp;命令就行。&lt;/p&gt;
&lt;p&gt;win7下保存的文本文件复制到Linux下后，中文变成乱码。&lt;/p&gt;
&lt;p&gt;＝＝＝〉win7的字符是&lt;span class="caps"&gt;GBK&lt;/span&gt;，Linux的字符是&lt;span class="caps"&gt;UTF8&lt;/span&gt;，utf8在win7可以正常显示，所以建议用iconv命令转成&lt;span class="caps"&gt;UTF8&lt;/span&gt;，而不是将Linux默认的编码变成&lt;span class="caps"&gt;GBK&lt;/span&gt;来适应。&lt;/p&gt;
&lt;p&gt;win7下保存的文本文件到Linux下后，双击提示运行。&lt;/p&gt;
&lt;p&gt;＝＝＝〉方法：chmod a-x &lt;filename&gt;；或者先在win7打包成zip文件，再复制，再解压，就可以彻底解决。这是个目前最好的通用方法。&lt;/p&gt;
&lt;h3 id="_8"&gt;感受&lt;a class="headerlink" href="#_8" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;至今已经输入2000个命令。不知不觉习惯中。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;* | more # 分屏显示

iconv -f gbk -t utf8 sample_config.txt | fromdos &amp;gt; ../release/sample_config

cat -n ~/.bash_history | todos &amp;gt; _bash_history2013-07-10.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;span class="caps"&gt;JNU&lt;/span&gt; 2013-07-10 16:41:51&amp;nbsp;今天考完《Linux/Unix使用》。&lt;/p&gt;</content><category term="笔记本"></category><category term="系统"></category><category term="windows"></category><category term="linux"></category><category term="ubuntu"></category><category term="转换"></category><category term="10.04"></category><category term="LTS"></category><category term="vmware"></category><category term="大学"></category><category term="大二"></category></entry></feed>