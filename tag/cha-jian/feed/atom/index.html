<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Linux迷+Python粉 - 插件</title><link href="https://blog.pythonwood.com/" rel="alternate"></link><link href="https://blog.pythonwood.com/tag/cha-jian/feed/atom/index.html" rel="self"></link><id>https://blog.pythonwood.com/</id><updated>2017-12-13T22:20:00+08:00</updated><entry><title>树莓派安装kodi神器和红外遥控装置变身多媒体中心</title><link href="https://blog.pythonwood.com/2017/12/%E6%A0%91%E8%8E%93%E6%B4%BE%E5%AE%89%E8%A3%85kodi%E7%A5%9E%E5%99%A8%E5%92%8C%E7%BA%A2%E5%A4%96%E9%81%A5%E6%8E%A7%E8%A3%85%E7%BD%AE%E5%8F%98%E8%BA%AB%E5%A4%9A%E5%AA%92%E4%BD%93%E4%B8%AD%E5%BF%83/" rel="alternate"></link><published>2017-12-13T22:20:00+08:00</published><updated>2017-12-13T22:20:00+08:00</updated><author><name>pythonwood</name></author><id>tag:blog.pythonwood.com,2017-12-13:/2017/12/树莓派安装kodi神器和红外遥控装置变身多媒体中心/</id><summary type="html">&lt;h3 id="_1"&gt;总述&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;在大学里通过IPV6看过IPTV，最近一两年直播非常火，电视盒子也火了一把。于是想用kodi看直播电视。&lt;/p&gt;
&lt;p&gt;kodi的低耗，无噪音，便宜的优点我觉得很适合做家庭多媒体服务中心。&lt;/p&gt;
&lt;p&gt;第二次用树莓派安装kodi，没有上一次那么迷茫了。把一些有价值的东西记录下来。&lt;/p&gt;
&lt;p&gt;&lt;img alt="遥控树莓派kodi.gif" src="https://blog.pythonwood.com/uploads/2017/遥控树莓派kodi.gif" title="遥控树莓派kodi"&gt;&lt;/p&gt;
&lt;h3 id="kodikodi-pvr-iptvsimple"&gt;一、安装Kodi（请务必一同安装kodi-pvr-iptvsimple）&lt;a class="headerlink" href="#kodikodi-pvr-iptvsimple" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get install kodi kodi-pvr-iptvsimple
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;并不是raspbian安装kodi后就能看直播 …&lt;/p&gt;</summary><content type="html">&lt;h3 id="_1"&gt;总述&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;在大学里通过IPV6看过IPTV，最近一两年直播非常火，电视盒子也火了一把。于是想用kodi看直播电视。&lt;/p&gt;
&lt;p&gt;kodi的低耗，无噪音，便宜的优点我觉得很适合做家庭多媒体服务中心。&lt;/p&gt;
&lt;p&gt;第二次用树莓派安装kodi，没有上一次那么迷茫了。把一些有价值的东西记录下来。&lt;/p&gt;
&lt;p&gt;&lt;img alt="遥控树莓派kodi.gif" src="https://blog.pythonwood.com/uploads/2017/遥控树莓派kodi.gif" title="遥控树莓派kodi"&gt;&lt;/p&gt;
&lt;h3 id="kodikodi-pvr-iptvsimple"&gt;一、安装Kodi（请务必一同安装kodi-pvr-iptvsimple）&lt;a class="headerlink" href="#kodikodi-pvr-iptvsimple" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get install kodi kodi-pvr-iptvsimple
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;并不是raspbian安装kodi后就能看直播/电视了。如果没有安装kodi-pvr-iptvsimple，kodi侧栏的电视功能无响应，直播/TV的相关插件也会有问题。我花了不少时间才找到了原因。&lt;/p&gt;
&lt;p&gt;如果出现kodi的插件里没有&amp;rdquo;PVR客户端&amp;rdquo;选项可设置，或者搜索不到PVR &lt;span class="caps"&gt;IPTV&lt;/span&gt; Simple&amp;nbsp;Client相关插件，或者设置时出现错误提示信息Error，通过安装kodi-pvr-iptvsimple可解决。&lt;/p&gt;
&lt;h3 id="kodi"&gt;二、设置kodi在无需桌面环境下随机自动运行&lt;a class="headerlink" href="#kodi" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;kodi可以通过非GUI的命令行启动，无需先启动桌面环境，非常省资源。&lt;/p&gt;
&lt;p&gt;我做过实测树莓派3启动到命令行只需50MB内存，启动kodi播放则再增加100MB内存。总共只需150MB。如果启动桌面环境，桌面环境单独占用70MB内存。&lt;/p&gt;
&lt;p&gt;先用&lt;code&gt;sudo raspi-config&lt;/code&gt;命令设置boot选项，启动后自动登录到命令行模式（auto boot to&amp;nbsp;cli）。&lt;/p&gt;
&lt;p&gt;然后在pi用户的.bashrc命令中追加一行&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;( cd /tmp; ps -ef | grep -v grep | grep kodi || DISPLAY=:0.0 nohup kodi ) 2&amp;gt;&amp;amp;1 &amp;gt;/dev/null &amp;amp;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这样树莓派每次都会启动到kodi，但不会多次运行kodi。&lt;/p&gt;
&lt;h3 id="kodi_1"&gt;三、树莓派添加红外模块后实现电视遥控器控制kodi&lt;a class="headerlink" href="#kodi_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;虽然安装快控（kodi remote control）App或者yaste&amp;nbsp;App可以在wifi环境下通过App远程控制树莓派运行的kodi。&lt;/p&gt;
&lt;p&gt;然而我觉得每次先解锁手机，打开软件，然后只为点几下键体验不是很好。&lt;/p&gt;
&lt;p&gt;所以，在老旧已坏的遥控飞机上拆下红外模块（对讲机，其他遥控玩具都会有这个模块，支持废物利用），结合家里旧的遥控器实现红外遥控树莓派。&lt;/p&gt;
&lt;p&gt;&lt;img alt="遥控飞机红外接受模块" src="http://www.dgpufei.com/Public/Uploads/Article/20170115/587b2a331b16a.jpg" title="遥控飞机红外接受模块"&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;我跟着这个教程&lt;a href="https://blog.newnius.com/raspberry-3b-setup-lirc.html" title="树莓派---红外遥控设置"&gt;树莓派&amp;mdash;红外遥控设置&lt;/a&gt;设置成功&lt;/strong&gt;。&lt;/p&gt;
&lt;h4 id="kodi_2"&gt;树莓派能识别红外遥控器后，就是树莓派kodi学习（映射）按键与指令对应关系的过程。&lt;a class="headerlink" href="#kodi_2" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;kodi配置键名（比如KEY_OK）和kodi动作的映射关系文件路径是/usr/share/kodi/system/Lircmap.xml。&lt;/p&gt;
&lt;p&gt;以下面mediacenter类型的遥控设备为例，按下该设备某个键，对应lircd接受到ok指令，那么kodi执行select动作。&lt;/p&gt;
&lt;p&gt;为了省事，我把其中键名最简洁&lt;remote device="mediacenter"&gt;的xml段复制后&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;remote&lt;/span&gt; &lt;span class="na"&gt;device=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;mediacenter&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    ...
    &lt;span class="nt"&gt;&amp;lt;up&amp;gt;&lt;/span&gt;up&lt;span class="nt"&gt;&amp;lt;/up&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;down&amp;gt;&lt;/span&gt;down&lt;span class="nt"&gt;&amp;lt;/down&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;select&amp;gt;&lt;/span&gt;ok&lt;span class="nt"&gt;&amp;lt;/select&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;one&amp;gt;&lt;/span&gt;1&lt;span class="nt"&gt;&amp;lt;/one&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;two&amp;gt;&lt;/span&gt;2&lt;span class="nt"&gt;&amp;lt;/two&amp;gt;&lt;/span&gt;
    ...
&lt;span class="nt"&gt;&amp;lt;/remote&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;粘贴并修改device值&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;remote&lt;/span&gt; &lt;span class="na"&gt;device=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;guangdianyaokong&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    ...
    &lt;span class="nt"&gt;&amp;lt;up&amp;gt;&lt;/span&gt;up&lt;span class="nt"&gt;&amp;lt;/up&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;down&amp;gt;&lt;/span&gt;down&lt;span class="nt"&gt;&amp;lt;/down&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;select&amp;gt;&lt;/span&gt;ok&lt;span class="nt"&gt;&amp;lt;/select&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;one&amp;gt;&lt;/span&gt;1&lt;span class="nt"&gt;&amp;lt;/one&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;two&amp;gt;&lt;/span&gt;2&lt;span class="nt"&gt;&amp;lt;/two&amp;gt;&lt;/span&gt;
    ...
&lt;span class="nt"&gt;&amp;lt;/remote&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;guangdianyaokong是我在/etc/lirc/lircd.conf文件的name字段名字，可自由修改。只要保持对应一致就可以了。&lt;/p&gt;
&lt;p&gt;我录制irrecord命令如下，省事的原因是录键名的时候对应取up，down，1，ok等简单词。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;irrecord -d /dev/lirc0 guangdianyaokong --disable-namespace
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id="kodi_3"&gt;四、接下来自由发挥，对kodi自行研究，安装各种插件。&lt;a class="headerlink" href="#kodi_3" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;按照插件库然后从插件库安装插件，或者直接按照目标插件的zip包。&lt;/p&gt;
&lt;p&gt;&lt;img alt="树莓派插件库列表截图" src="https://blog.pythonwood.com/uploads/2017/树莓派插件库列表截图.jpg" title="树莓派插件库列表截图"&gt;&lt;/p&gt;
&lt;p&gt;搜集m3u8直播列表，灌给PVR IPTV客户端使用。也可以使用&lt;a href="http://blog.sina.com.cn/s/blog_4ae08cc00102wz42.html" title="用Kodi观看网络直播电视：新插件IPTV Tool "&gt;&lt;span class="caps"&gt;IPTV&lt;/span&gt; Tool&lt;/a&gt;插件来托管PVR&amp;nbsp;IPTV客户端&lt;/p&gt;
&lt;h3 id="m3u8url"&gt;五、直播m3u8列表的url存活测试&lt;a class="headerlink" href="#m3u8url" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id="_2"&gt;导入播放器中手动测试&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;smplayer或者vlc都能打开m3u8文件进行网络播放。所以也能来测试是否存活。只是方法简单直接容易累。&lt;/p&gt;
&lt;p&gt;可打开播放器界面中打开m3u8文件；命令行则可用smplayer &lt;m3u8_list&gt;， 或者 vlc &lt;m3u8_list&gt;打开。&lt;/p&gt;
&lt;h4 id="_3"&gt;脚本批量快速检测&lt;a class="headerlink" href="#_3" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;（todo&amp;hellip;）&lt;/p&gt;
&lt;h3 id="_4"&gt;提醒&lt;a class="headerlink" href="#_4" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;熟悉Linux环境的话，完成一台树莓派环境配置之后，可随时备份，其它树莓派克隆环境就可以了。具体方法参考另一篇随笔。 
&lt;a href="https://blog.pythonwood.com/2017/11/树莓派SD卡Linux系统盘复制，10分钟克隆新机/"&gt;树莓派SD卡Linux系统盘复制，10分钟克隆新机&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="_5"&gt;参考&lt;a class="headerlink" href="#_5" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Kodi 开源多媒体播放器 - 神器 &lt;a href="http://www.cnblogs.com/XieSir/articles/6287387.html"&gt;http://www.cnblogs.com/XieSir/articles/6287387.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;6款树莓派kodi插件推荐 &lt;a href="https://www.htpcbeginner.com/raspberry-pi-kodi-addons/"&gt;https://www.htpcbeginner.com/raspberry-pi-kodi-addons/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;移动网络电视和IPTV的区别在哪里？ &lt;a href="http://www.shafa.com/articles/zJmvNRrYFs6uzjhH.html"&gt;http://www.shafa.com/articles/zJmvNRrYFs6uzjhH.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</content><category term="树莓派"></category><category term="kodi"></category><category term="插件"></category><category term="IPTV"></category><category term="直播"></category><category term="网络电视"></category><category term="遥控"></category></entry><entry><title>校园选课项目：一个名字叫jumper的chrome插件的诞生记</title><link href="https://blog.pythonwood.com/2014/04/%E6%A0%A1%E5%9B%AD%E9%80%89%E8%AF%BE%E9%A1%B9%E7%9B%AE%EF%BC%9A%E4%B8%80%E4%B8%AA%E5%90%8D%E5%AD%97%E5%8F%ABjumper%E7%9A%84chrome%E6%8F%92%E4%BB%B6%E7%9A%84%E8%AF%9E%E7%94%9F%E8%AE%B0/" rel="alternate"></link><published>2014-04-03T15:46:00+08:00</published><updated>2017-11-27T22:12:00+08:00</updated><author><name>pythonwood</name></author><id>tag:blog.pythonwood.com,2014-04-03:/2014/04/校园选课项目：一个名字叫jumper的chrome插件的诞生记/</id><summary type="html">&lt;p&gt;选课是个问题，为了选课，便有了以下的故事。&lt;/p&gt;
&lt;h3 id="_1"&gt;选课需求与背景&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;最开始，萌生想法于2013年7月。&lt;/p&gt;
&lt;p&gt;接着网上了解了chrome的结构知识，却发现例子是假的。&lt;/p&gt;
&lt;p&gt;幸好有之前师兄的一个同功能插件开源，但代码写得很乱，我喜欢逻辑清楚，结构优雅的代码。终于决定重写一个。&lt;/p&gt;
&lt;p&gt;继续学习chrome,jQuery知识，遇到问题主要找百度谷歌，发现谷歌搜索比百度强多！而且，本博3个月了都还没被百度收录到！&lt;/p&gt;
&lt;p&gt;关键时间是从2013年9月2日到9月6日 …&lt;/p&gt;</summary><content type="html">&lt;p&gt;选课是个问题，为了选课，便有了以下的故事。&lt;/p&gt;
&lt;h3 id="_1"&gt;选课需求与背景&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;最开始，萌生想法于2013年7月。&lt;/p&gt;
&lt;p&gt;接着网上了解了chrome的结构知识，却发现例子是假的。&lt;/p&gt;
&lt;p&gt;幸好有之前师兄的一个同功能插件开源，但代码写得很乱，我喜欢逻辑清楚，结构优雅的代码。终于决定重写一个。&lt;/p&gt;
&lt;p&gt;继续学习chrome,jQuery知识，遇到问题主要找百度谷歌，发现谷歌搜索比百度强多！而且，本博3个月了都还没被百度收录到！&lt;/p&gt;
&lt;p&gt;关键时间是从2013年9月2日到9月6日，工作时间安排非常严重，以致最后生病了。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;收益是：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;一、这个小小的项目，我经历了功能导向的项目开发的全过程。&lt;/p&gt;
&lt;p&gt;二、获得了从零到有的chrome开发实践经验。&lt;/p&gt;
&lt;p&gt;三、jQuery从零到有，用得其所，学有所成，不是光学理论的易忘型。&lt;/p&gt;
&lt;p&gt;四、增强了我的学习信心，开阔了我的视野。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;坏处是：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1、过程累，有压力，睡眠不足。明白程序员是不好当的。&lt;/p&gt;
&lt;p&gt;2、完成项目后两三天，病倒了，休息了半个月，特别是中秋节几天废了！&lt;/p&gt;
&lt;h3 id="_2"&gt;总结：&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;a、学习他人代码是成为高手的捷径。以前我很不愿意读代码。要想看得远，还可以站在巨人的肩膀上。&lt;/p&gt;
&lt;p&gt;b、的确有针对性的问题的搜索学习方式是一种无上的学习方式！&lt;/p&gt;
&lt;h3 id="_3"&gt;附参考：&lt;a class="headerlink" href="#_3" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;好书推荐：《锋利的jQuery》&lt;/p&gt;
&lt;h5 id="chrome"&gt;chrome插件入门第一步：&lt;a class="headerlink" href="#chrome" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h5&gt;
&lt;p&gt;Chrome插件（Extensions）开发攻略  &amp;gt;&amp;gt;&amp;gt;  &lt;a href="http://www.cnblogs.com/guogangj/p/3235703.html"&gt;http://www.cnblogs.com/guogangj/p/3235703.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chrome 插件开发：  &amp;gt;&amp;gt;&amp;gt;   &lt;a href="http://nottiansyf.iteye.com/blog/546612"&gt;http://nottiansyf.iteye.com/blog/546612&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chrome插件开发之一: 搭建基本结构  &amp;gt;&amp;gt;&amp;gt;   &lt;a href="http://blog.csdn.net/ligaoyang/article/details/6065328"&gt;http://blog.csdn.net/ligaoyang/article/details/6065328&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;chrome插件编写中需要了解的几个概念和一些方法  &amp;gt;&amp;gt;&amp;gt;  &lt;a href="http://www.itzhai.com/chrome-plug-in-writers-need-to-understand-a-few-concepts-and-some-of-the-ways.html"&gt;http://www.itzhai.com/chrome-plug-in-writers-need-to-understand-a-few-concepts-and-some-of-the-ways.html&lt;/a&gt;&amp;nbsp;(有一系列的讲解)&lt;/p&gt;
&lt;p&gt;使用chrome查看http请求  &amp;gt;&amp;gt;&amp;gt;  &lt;a href="http://www.whoslab.me/blog/?p=416"&gt;http://www.whoslab.me/blog/?p=416&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;chrome 查看網頁post參數方法  &amp;gt;&amp;gt;&amp;gt;  &lt;a href="http://itgroup.blueshop.com.tw/superpapa/notebook?n=convew&amp;amp;i=405927"&gt;http://itgroup.blueshop.com.tw/superpapa/notebook?n=convew&amp;amp;i=405927&lt;/a&gt;&lt;/p&gt;
&lt;h5 id="chrome_1"&gt;chrome深入：&lt;a class="headerlink" href="#chrome_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h5&gt;
&lt;p&gt;Chrome插件开发中的消息传递  &amp;gt;&amp;gt;&amp;gt;  &lt;a href="http://www.yuanlairc.com/program/chromex.html"&gt;http://www.yuanlairc.com/program/chromex.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chrome扩展开发常见问题汇总  &amp;gt;&amp;gt;&amp;gt;  &lt;a href="http://www.cnblogs.com/slmk/archive/2012/11/16/2772985.html"&gt;http://www.cnblogs.com/slmk/archive/2012/11/16/2772985.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这段时间正是12306抢票时间刚过，神器不过浮云，如果你看透了它。JNU的。&lt;/p&gt;</content><category term="校园"></category><category term="大三"></category><category term="选课"></category><category term="chrome"></category><category term="插件"></category><category term="jumper"></category><category term="javascript"></category><category term="js"></category></entry></feed>