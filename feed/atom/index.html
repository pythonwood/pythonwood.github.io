<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Linux迷+Python粉</title><link href="https://pythonwood.github.io/" rel="alternate"></link><link href="https://pythonwood.github.io/feed/atom/index.html" rel="self"></link><id>https://pythonwood.github.io/</id><updated>2018-12-05T15:00:00+08:00</updated><entry><title>Linux释放磁盘空间——系统日志systemd-journal清理</title><link href="https://pythonwood.github.io/2018/12/Linux%E9%87%8A%E6%94%BE%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E2%80%94%E2%80%94%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%97systemd-journal%E6%B8%85%E7%90%86/" rel="alternate"></link><published>2018-12-05T15:00:00+08:00</published><updated>2018-12-05T15:00:00+08:00</updated><author><name>pythonwood</name></author><id>tag:pythonwood.github.io,2018-12-05:/2018/12/Linux释放磁盘空间——系统日志systemd-journal清理/</id><summary type="html">&lt;h2 id="varlogjournal"&gt;/var/log/journal 目录占用空间很大&lt;a class="headerlink" href="#varlogjournal" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;原因systemd系统通过systemd-journald.service记录日志.&amp;nbsp;默认以二进制写入/var/log/journal/目录中的日志文件，系统安装久了发现磁盘空间逐渐变小。&lt;/p&gt;
&lt;p&gt;ubuntu18.04，&amp;nbsp;centos7等新系统都使用新型系统systemd，就可能需要清理。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ du -sh /var/log …&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;h2 id="varlogjournal"&gt;/var/log/journal 目录占用空间很大&lt;a class="headerlink" href="#varlogjournal" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;原因systemd系统通过systemd-journald.service记录日志.&amp;nbsp;默认以二进制写入/var/log/journal/目录中的日志文件，系统安装久了发现磁盘空间逐渐变小。&lt;/p&gt;
&lt;p&gt;ubuntu18.04，&amp;nbsp;centos7等新系统都使用新型系统systemd，就可能需要清理。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ du -sh /var/log/journal/
&lt;span class="m"&gt;2&lt;/span&gt;.2G /var/log/journal/
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="_1"&gt;手动命令行清理 单次生效 可临时救急&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;删除数天以前旧日志&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# journalctl --vacuum-time=7d
Vacuuming done, freed 2.1G of archived journals from /var/log/journal/1095e22a7289463f9f4fdd6d10e3da34.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;删除到只保留100M日志量的状态&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# journalctl --vacuum-size=100M
Vacuuming done, freed 2.0G of archived journals from /var/log/journal/1095e22a7289463f9f4fdd6d10e3da34.
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="systemd-journaldservice"&gt;配置systemd-journald.service 永久生效&lt;a class="headerlink" href="#systemd-journaldservice" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;systemd-journald 的配置文件为 /etc/systemd/journald.conf&amp;nbsp;中，将SystemMaxUse=这行去掉注释，修改为SystemMaxUse=1G，将日志总量限制在1G内。&lt;/p&gt;
&lt;p&gt;预计下次启动生效，但我测试暂没有效果，不知原因。&lt;/p&gt;
&lt;h2 id="_2"&gt;参考&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;clear up systemd-journal&amp;nbsp;https://ma.ttias.be/clear-systemd-journal/&lt;/p&gt;
&lt;p&gt;使用journalctl查看systemd日志&amp;nbsp;https://lujun9972.github.io/blog/2018/08/08/使用journalctl查看systemd日志/&lt;/p&gt;</content><category term="linux"></category><category term="systemd"></category><category term="journal"></category><category term="磁盘清理"></category></entry><entry><title>网络检测ping脚本——搬瓦工CN2机房PING测试</title><link href="https://pythonwood.github.io/2018/11/%E7%BD%91%E7%BB%9C%E6%A3%80%E6%B5%8Bping%E8%84%9A%E6%9C%AC%E2%80%94%E2%80%94%E6%90%AC%E7%93%A6%E5%B7%A5CN2%E6%9C%BA%E6%88%BFPING%E6%B5%8B%E8%AF%95/" rel="alternate"></link><published>2018-11-25T20:00:00+08:00</published><updated>2018-11-27T16:00:00+08:00</updated><author><name>pythonwood</name></author><id>tag:pythonwood.github.io,2018-11-25:/2018/11/网络检测ping脚本——搬瓦工CN2机房PING测试/</id><summary type="html">&lt;h2 id="vps"&gt;项目起源：搬瓦工vps快过期&lt;a class="headerlink" href="#vps" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;为决定是否upgrade到cn2机房，需要先验证&lt;span class="caps"&gt;CN2&lt;/span&gt;机房网络是不是更好。一直没有一个适合自己的ping工具，自己写一个。&lt;/p&gt;
&lt;h3 id="openwrt5ping"&gt;部署在openwrt路由，定时任务每5分钟启动ping一次&lt;a class="headerlink" href="#openwrt5ping" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;脚本兼容新旧版本ping（输出内容不同），使用sh标准达到最大linux兼容。已兼容openwrt。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# ping 50次，不超过90s，丢包率每字符表示2%，延迟每字符表示10ms
*/5 …&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;h2 id="vps"&gt;项目起源：搬瓦工vps快过期&lt;a class="headerlink" href="#vps" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;为决定是否upgrade到cn2机房，需要先验证&lt;span class="caps"&gt;CN2&lt;/span&gt;机房网络是不是更好。一直没有一个适合自己的ping工具，自己写一个。&lt;/p&gt;
&lt;h3 id="openwrt5ping"&gt;部署在openwrt路由，定时任务每5分钟启动ping一次&lt;a class="headerlink" href="#openwrt5ping" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;脚本兼容新旧版本ping（输出内容不同），使用sh标准达到最大linux兼容。已兼容openwrt。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# ping 50次，不超过90s，丢包率每字符表示2%，延迟每字符表示10ms
*/5 * * * * /path/to/20181119_host_ping.sh 23.252.103.101 50 90 2 10  &amp;gt;&amp;gt;/tmp/ping.DC3.txt 2&amp;gt;/dev/null
*/5 * * * * /path/to/20181119_host_ping.sh 65.49.131.102  50 90 2 10  &amp;gt;&amp;gt;/tmp/ping.DC9.txt 2&amp;gt;/dev/null
*/5 * * * * /path/to/20181119_host_ping.sh vps.old  50 90 2 10  &amp;gt;&amp;gt;/tmp/ping.vps.old.txt 2&amp;gt;/dev/null
*/5 * * * * /path/to/20181119_host_ping.sh vps.new  50 90 2 10  &amp;gt;&amp;gt;/tmp/ping.vps.new.txt 2&amp;gt;/dev/null
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="host"&gt;最终版本的脚本，单host版&lt;a class="headerlink" href="#host" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id="_1"&gt;脚本使用与输出字段意义&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ./20181119_host_ping.sh
请参考文档使用：
./20181119_host_ping.sh &amp;lt;host&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="m"&gt;163&lt;/span&gt;.com&amp;gt; &amp;lt;pkgcn&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;&amp;gt; &amp;lt;maxtime&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="m"&gt;30&lt;/span&gt;&amp;gt; &amp;lt;lost_step&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&amp;gt; &amp;lt;rt_step&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&amp;gt;

./20181119_host_ping.sh &lt;span class="m"&gt;163&lt;/span&gt;.com &lt;span class="m"&gt;10&lt;/span&gt; &lt;span class="m"&gt;30&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="m"&gt;5&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;测10次ping，不超过30s，丢包率每字符表示1%，延迟每字符表示5ms&lt;span class="o"&gt;)&lt;/span&gt;
时间                出包 入包 丢包 min  avg  max &lt;span class="p"&gt;|&lt;/span&gt;图形化丢包率，最长25字符 &lt;span class="p"&gt;|&lt;/span&gt;图形化延迟avg，最多50字符
&lt;span class="m"&gt;2018&lt;/span&gt;-11-20_10:08:55    &lt;span class="m"&gt;3&lt;/span&gt;   &lt;span class="m"&gt;3&lt;/span&gt;   &lt;span class="m"&gt;2&lt;/span&gt;%  &lt;span class="m"&gt;166&lt;/span&gt;  &lt;span class="m"&gt;167&lt;/span&gt;  &lt;span class="m"&gt;169&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;xx                       &lt;span class="p"&gt;|&lt;/span&gt;****************
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="_2"&gt;比较结果&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;搬瓦工&lt;span class="caps"&gt;CN2&lt;/span&gt; &lt;span class="caps"&gt;GIA&lt;/span&gt;质量非常稳定，土豪随意；对于移动用户访问，&lt;span class="caps"&gt;CN2&lt;/span&gt;比一般机房提升不大。&lt;/p&gt;
&lt;p&gt;一天之中2-10点网络最好，晚上6点至凌晨1点最差&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@Gargoyle:/tmp# tail ping.DC9.txt ping.DC3.txt ping.vps.old.txt -n 50
==&amp;gt; ping.DC9.txt &amp;lt;==
16:00:01  50  50   0%  163  166  170 |                          |****************
16:05:01  51  50   1%  163  177  301 |                          |*****************
16:10:01  50  50   0%  162  166  170 |                          |****************
16:15:01  50  50   0%  164  166  171 |                          |****************
16:20:01  50  50   0%  164  166  169 |                          |****************
16:25:01  50  50   0%  162  166  171 |                          |****************
16:30:02  50  50   0%  164  166  171 |                          |****************
16:35:01  50  50   0%  163  167  174 |                          |****************
16:40:02  50  50   0%  164  167  172 |                          |****************
16:45:01  50  50   0%  164  168  173 |                          |****************
16:50:01  50  50   0%  163  166  171 |                          |****************
16:55:01  50  50   0%  163  166  170 |                          |****************
17:00:01  51  50   1%  163  166  174 |                          |****************
17:05:01  50  50   0%  164  167  178 |                          |****************
17:10:01  50  50   0%  163  166  171 |                          |****************
17:15:01  50  50   0%  163  166  170 |                          |****************
17:20:01  50  50   0%  163  166  169 |                          |****************
17:25:01  50  50   0%  163  166  169 |                          |****************
17:30:01  50  50   0%  163  166  171 |                          |****************
17:35:01  50  50   0%  163  166  170 |                          |****************
17:40:01  50  50   0%  164  167  172 |                          |****************
17:45:01  50  50   0%  164  167  169 |                          |****************
17:50:01  50  50   0%  164  166  169 |                          |****************
17:55:01  50  50   0%  162  166  171 |                          |****************
18:00:01  50  50   0%  164  166  170 |                          |****************
18:05:01  50  50   0%  164  167  170 |                          |****************
18:10:01  50  50   0%  163  165  168 |                          |****************
18:15:01  50  50   0%  164  166  170 |                          |****************
18:20:01  50  50   0%  164  166  170 |                          |****************
18:25:01  50  50   0%  164  166  169 |                          |****************
18:30:01  50  50   0%  164  166  169 |                          |****************
18:35:01  50  50   0%  164  166  171 |                          |****************
18:40:01  50  50   0%  164  167  171 |                          |****************
18:45:01  50  50   0%  163  166  170 |                          |****************
18:50:01  50  50   0%  164  166  171 |                          |****************
18:55:01  50  50   0%  164  166  171 |                          |****************
19:00:01  50  50   0%  164  167  188 |                          |****************
19:05:01  50  50   0%  164  168  188 |                          |****************
19:10:01  50  50   0%  163  166  171 |                          |****************
19:15:01  50  50   0%  164  169  174 |                          |****************
19:20:01  50  50   0%  163  168  183 |                          |****************
19:25:01  50  50   0%  164  167  180 |                          |****************
19:30:01  50  50   0%  164  168  187 |                          |****************
19:35:01  50  50   0%  163  169  193 |                          |****************
19:40:01  50  50   0%  162  168  196 |                          |****************
19:45:01  50  50   0%  163  166  169 |                          |****************
19:50:01  50  50   0%  163  167  169 |                          |****************
19:55:01  50  50   0%  163  166  170 |                          |****************
20:00:01  50  50   0%  163  167  192 |                          |****************
20:05:01  50  50   0%  162  166  171 |                          |****************

==&amp;gt; ping.DC3.txt &amp;lt;==
16:00:01  59  50  15%  234  283  333 |xxxxxxx                   |****************************
16:05:01  56  50  10%  174  241  318 |xxxxx                     |************************
16:10:01  52  50   3%  188  246  264 |x                         |************************
16:15:01  51  50   1%  179  229  255 |                          |**********************
16:20:02  50  50   0%  189  245  261 |                          |************************
16:25:01  51  50   1%  188  246  267 |                          |************************
16:30:02  52  50   3%  187  245  265 |x                         |************************
16:35:02  50  50   0%  212  249  262 |                          |************************
16:40:02  52  50   3%  181  249  264 |x                         |************************
16:45:01  53  50   5%  191  233  261 |xx                        |***********************
16:50:01  53  50   5%  188  249  263 |xx                        |************************
16:55:01  50  50   0%  174  241  263 |                          |************************
17:00:01  50  50   0%  208  248  263 |                          |************************
17:05:01  50  50   0%  204  242  262 |                          |************************
17:10:01  54  50   7%  188  216  252 |xxx                       |*********************
17:15:01  51  50   1%  218  252  263 |                          |*************************
17:20:01  51  50   1%  205  249  265 |                          |************************
17:25:01  51  50   1%  196  243  261 |                          |************************
17:30:01  52  50   3%  197  249  265 |x                         |************************
17:35:01  52  50   3%  224  249  262 |x                         |************************
17:40:01  54  50   7%  213  251  266 |xxx                       |*************************
17:45:01  50  50   0%  221  247  265 |                          |************************
17:50:01  52  50   3%  206  246  260 |x                         |************************
17:55:01  53  50   5%  180  241  265 |xx                        |************************
18:00:01  50  50   0%  207  243  262 |                          |************************
18:05:01  52  50   3%  198  243  263 |x                         |************************
18:10:01  52  50   3%  197  252  264 |x                         |*************************
18:15:01  51  50   1%  220  247  263 |                          |************************
18:20:01  51  50   1%  205  245  263 |                          |************************
18:25:01  50  50   0%  178  221  247 |                          |**********************
18:30:01  51  50   1%  178  237  262 |                          |***********************
18:35:01  51  50   1%  161  187  261 |                          |******************
18:40:01  51  50   1%  206  241  261 |                          |************************
18:45:01  51  50   1%  165  188  209 |                          |******************
18:50:01  50  50   0%  209  247  264 |                          |************************
18:55:01  50  50   0%  196  236  261 |                          |***********************
19:00:01  52  50   3%  167  200  222 |x                         |********************
19:05:01  52  50   3%  170  200  238 |x                         |********************
19:10:01  50  50   0%  225  248  263 |                          |************************
19:15:01  51  50   1%  204  246  263 |                          |************************
19:20:01  50  50   0%  226  248  263 |                          |************************
19:25:01  51  50   1%  204  249  264 |                          |************************
19:30:01  50  50   0%  212  253  265 |                          |*************************
19:35:01  52  50   3%  206  245  265 |x                         |************************
19:40:01  50  50   0%  206  241  286 |                          |************************
19:45:01  50  50   0%  180  236  262 |                          |***********************
19:50:01  50  50   0%  197  241  264 |                          |************************
19:55:01  51  50   1%  213  255  265 |                          |*************************
20:00:01  54  50   7%  204  254  264 |xxx                       |*************************
20:05:01  53  50   5%  216  250  265 |xx                        |*************************

==&amp;gt; ping.vps.old.txt &amp;lt;==
16:00:01  67  50  25%  240  285  338 |xxxxxxxxxxxx              |****************************
16:05:01  61  50  18%  183  247  325 |xxxxxxxxx                 |************************
16:10:01  51  50   1%  219  254  270 |                          |*************************
16:15:02  55  50   9%  182  236  262 |xxxx                      |***********************
16:20:01  51  50   1%  197  258  524 |                          |*************************
16:25:01  50  50   0%  193  276 1166 |                          |***************************
16:30:02  52  50   3%  191  250  269 |x                         |*************************
16:35:02  51  50   1%  231  256  270 |                          |*************************
16:40:02  50  50   0%  190  254  269 |                          |*************************
16:45:01  51  50   1%  194  239  266 |                          |***********************
16:50:01  50  50   0%  191  256  270 |                          |*************************
16:55:01  50  50   0%  179  247  266 |                          |************************
17:00:01  51  50   1%  220  254  269 |                          |*************************
17:05:01  50  50   0%  211  248  267 |                          |************************
17:10:01  51  50   1%  194  222  256 |                          |**********************
17:15:01  51  50   1%  213  258  271 |                          |*************************
17:20:01  52  50   3%  209  255  268 |x                         |*************************
17:25:01  50  50   0%  199  248  268 |                          |************************
17:30:01  50  50   0%  198  255  270 |                          |*************************
17:35:01  51  50   1%  231  255  270 |                          |*************************
17:40:01  52  50   3%  220  257  270 |x                         |*************************
17:45:01  51  50   1%  225  252  267 |                          |*************************
17:50:01  50  50   0%  208  251  268 |                          |*************************
17:55:01  51  50   1%  186  248  269 |                          |************************
18:00:01  51  50   1%  211  248  272 |                          |************************
18:05:01  52  50   3%  207  249  267 |x                         |************************
18:10:01  52  50   3%  199  258  269 |x                         |*************************
18:15:01  50  50   0%  223  252  269 |                          |*************************
18:20:01  50  50   0%  210  250  267 |                          |*************************
18:25:01  51  50   1%  184  227  254 |                          |**********************
18:30:01  50  50   0%  187  244  267 |                          |************************
18:35:01  51  50   1%  169  194  268 |                          |*******************
18:40:01  51  50   1%  212  247  266 |                          |************************
18:45:01  50  50   0%  170  193  213 |                          |*******************
18:50:01  51  50   1%  216  252  269 |                          |*************************
18:55:01  50  50   0%  201  242  267 |                          |************************
19:00:01  50  50   0%  170  206  227 |                          |********************
19:05:01  51  50   1%  175  208  261 |                          |********************
19:10:01  50  50   0%  230  253  267 |                          |*************************
19:15:01  53  50   5%  210  253  268 |xx                        |*************************
19:20:01  50  50   0%  230  254  267 |                          |*************************
19:25:01  50  50   0%  211  254  268 |                          |*************************
19:30:01  50  50   0%  221  259  269 |                          |*************************
19:35:01  51  50   1%  213  252  269 |                          |*************************
19:40:01  50  50   0%  220  248  268 |                          |************************
19:45:01  50  50   0%  187  241  267 |                          |************************
19:50:01  50  50   0%  202  247  270 |                          |************************
19:55:01  52  50   3%  216  261  268 |x                         |**************************
20:00:01  51  50   1%  212  258  269 |                          |*************************
20:05:01  52  50   3%  228  257  270 |x                         |*************************
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id="2018-11-27"&gt;2018-11-27后注：&lt;a class="headerlink" href="#2018-11-27" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;作为搬瓦工多年老用户，随着去年以来ssh操作vps卡顿日渐严重，差点就因此粉转黑。&amp;nbsp;不过对我来说，还是搬瓦工性价比高，操作熟悉。&lt;/p&gt;
&lt;p&gt;非常遗憾，错过史上最大促销（&lt;span class="caps"&gt;CPU&lt;/span&gt;：2 核 内存：2048 &lt;span class="caps"&gt;MB&lt;/span&gt; 硬盘：40 &lt;span class="caps"&gt;GB&lt;/span&gt; &lt;span class="caps"&gt;SSD&lt;/span&gt; 流量：1 &lt;span class="caps"&gt;TB&lt;/span&gt; &lt;span class="caps"&gt;CN2&lt;/span&gt;网络）相当于打3折。&amp;nbsp;25号因为黑五优惠，买了普通cn2机房vps。&lt;/p&gt;
&lt;p&gt;让人满意的是，ping结果事实证明，新vps比老vps的网络环境好了小一倍。 老旧vps都安装了nginx，使用http播放mp4视频，新vps体验完胜老vps。 就算去掉部分优化的影响：新vps系统是ubuntu18.04并开启了&lt;span class="caps"&gt;BBR&lt;/span&gt;拥塞算法。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;最终结果：cn2机房vps完胜老vps&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ tail /tmp/ping.vps* -n &lt;span class="m"&gt;40&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; sed &lt;span class="s1"&gt;&amp;#39;s/2018-11-27_//&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; sed &lt;span class="s1"&gt;&amp;#39;/^16:/d&amp;#39;&lt;/span&gt;

&lt;span class="o"&gt;==&lt;/span&gt;&amp;gt; /tmp/ping.vpsold.txt &amp;lt;&lt;span class="o"&gt;==&lt;/span&gt;
&lt;span class="m"&gt;13&lt;/span&gt;:30:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;180&lt;/span&gt;  &lt;span class="m"&gt;221&lt;/span&gt;  &lt;span class="m"&gt;267&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;**********************
&lt;span class="m"&gt;13&lt;/span&gt;:35:01  &lt;span class="m"&gt;51&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;1&lt;/span&gt;%  &lt;span class="m"&gt;216&lt;/span&gt;  &lt;span class="m"&gt;271&lt;/span&gt;  &lt;span class="m"&gt;518&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;***************************
&lt;span class="m"&gt;13&lt;/span&gt;:40:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;222&lt;/span&gt;  &lt;span class="m"&gt;233&lt;/span&gt;  &lt;span class="m"&gt;247&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;***********************
&lt;span class="m"&gt;13&lt;/span&gt;:45:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;195&lt;/span&gt;  &lt;span class="m"&gt;236&lt;/span&gt;  &lt;span class="m"&gt;269&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;***********************
&lt;span class="m"&gt;13&lt;/span&gt;:50:01  &lt;span class="m"&gt;55&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;9&lt;/span&gt;%  &lt;span class="m"&gt;235&lt;/span&gt;  &lt;span class="m"&gt;246&lt;/span&gt;  &lt;span class="m"&gt;265&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;xxxx                      &lt;span class="p"&gt;|&lt;/span&gt;************************
&lt;span class="m"&gt;13&lt;/span&gt;:55:01  &lt;span class="m"&gt;56&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;10&lt;/span&gt;%  &lt;span class="m"&gt;261&lt;/span&gt;  &lt;span class="m"&gt;281&lt;/span&gt;  &lt;span class="m"&gt;311&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;xxxxx                     &lt;span class="p"&gt;|&lt;/span&gt;****************************
&lt;span class="m"&gt;14&lt;/span&gt;:00:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;166&lt;/span&gt;  &lt;span class="m"&gt;225&lt;/span&gt;  &lt;span class="m"&gt;248&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;**********************
&lt;span class="m"&gt;14&lt;/span&gt;:05:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;168&lt;/span&gt;  &lt;span class="m"&gt;197&lt;/span&gt;  &lt;span class="m"&gt;230&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;*******************
&lt;span class="m"&gt;14&lt;/span&gt;:10:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;162&lt;/span&gt;  &lt;span class="m"&gt;181&lt;/span&gt;  &lt;span class="m"&gt;217&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;******************
&lt;span class="m"&gt;14&lt;/span&gt;:15:02  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;196&lt;/span&gt;  &lt;span class="m"&gt;231&lt;/span&gt;  &lt;span class="m"&gt;280&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;***********************
&lt;span class="m"&gt;14&lt;/span&gt;:20:02  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;212&lt;/span&gt;  &lt;span class="m"&gt;239&lt;/span&gt;  &lt;span class="m"&gt;265&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;***********************
&lt;span class="m"&gt;14&lt;/span&gt;:25:02  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;195&lt;/span&gt;  &lt;span class="m"&gt;246&lt;/span&gt;  &lt;span class="m"&gt;288&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;************************
&lt;span class="m"&gt;14&lt;/span&gt;:30:02  &lt;span class="m"&gt;51&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;1&lt;/span&gt;%  &lt;span class="m"&gt;192&lt;/span&gt;  &lt;span class="m"&gt;233&lt;/span&gt;  &lt;span class="m"&gt;263&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;***********************
&lt;span class="m"&gt;14&lt;/span&gt;:35:02  &lt;span class="m"&gt;52&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;3&lt;/span&gt;%  &lt;span class="m"&gt;220&lt;/span&gt;  &lt;span class="m"&gt;264&lt;/span&gt;  &lt;span class="m"&gt;292&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;x                         &lt;span class="p"&gt;|&lt;/span&gt;**************************
&lt;span class="m"&gt;14&lt;/span&gt;:40:02  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;178&lt;/span&gt;  &lt;span class="m"&gt;211&lt;/span&gt;  &lt;span class="m"&gt;259&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;*********************
&lt;span class="m"&gt;14&lt;/span&gt;:45:02  &lt;span class="m"&gt;51&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;1&lt;/span&gt;%  &lt;span class="m"&gt;172&lt;/span&gt;  &lt;span class="m"&gt;204&lt;/span&gt;  &lt;span class="m"&gt;234&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;********************
&lt;span class="m"&gt;14&lt;/span&gt;:50:01  &lt;span class="m"&gt;51&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;1&lt;/span&gt;%  &lt;span class="m"&gt;245&lt;/span&gt;  &lt;span class="m"&gt;281&lt;/span&gt;  &lt;span class="m"&gt;321&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;****************************
&lt;span class="m"&gt;14&lt;/span&gt;:55:01  &lt;span class="m"&gt;53&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;5&lt;/span&gt;%  &lt;span class="m"&gt;231&lt;/span&gt;  &lt;span class="m"&gt;296&lt;/span&gt;  &lt;span class="m"&gt;337&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;xx                        &lt;span class="p"&gt;|&lt;/span&gt;*****************************
&lt;span class="m"&gt;15&lt;/span&gt;:00:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;231&lt;/span&gt;  &lt;span class="m"&gt;263&lt;/span&gt;  &lt;span class="m"&gt;290&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;**************************
&lt;span class="m"&gt;15&lt;/span&gt;:05:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;229&lt;/span&gt;  &lt;span class="m"&gt;258&lt;/span&gt;  &lt;span class="m"&gt;282&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;*************************
&lt;span class="m"&gt;15&lt;/span&gt;:10:01  &lt;span class="m"&gt;51&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;1&lt;/span&gt;%  &lt;span class="m"&gt;195&lt;/span&gt;  &lt;span class="m"&gt;241&lt;/span&gt;  &lt;span class="m"&gt;277&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;************************
&lt;span class="m"&gt;15&lt;/span&gt;:15:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;213&lt;/span&gt;  &lt;span class="m"&gt;263&lt;/span&gt;  &lt;span class="m"&gt;320&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;**************************
&lt;span class="m"&gt;15&lt;/span&gt;:20:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;182&lt;/span&gt;  &lt;span class="m"&gt;208&lt;/span&gt;  &lt;span class="m"&gt;225&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;********************
&lt;span class="m"&gt;15&lt;/span&gt;:25:01  &lt;span class="m"&gt;51&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;1&lt;/span&gt;%  &lt;span class="m"&gt;227&lt;/span&gt;  &lt;span class="m"&gt;268&lt;/span&gt;  &lt;span class="m"&gt;313&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;**************************
&lt;span class="m"&gt;15&lt;/span&gt;:30:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;218&lt;/span&gt;  &lt;span class="m"&gt;288&lt;/span&gt;  &lt;span class="m"&gt;340&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;****************************
&lt;span class="m"&gt;15&lt;/span&gt;:35:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;187&lt;/span&gt;  &lt;span class="m"&gt;225&lt;/span&gt;  &lt;span class="m"&gt;339&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;**********************
&lt;span class="m"&gt;15&lt;/span&gt;:40:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;224&lt;/span&gt;  &lt;span class="m"&gt;263&lt;/span&gt;  &lt;span class="m"&gt;297&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;**************************
&lt;span class="m"&gt;15&lt;/span&gt;:45:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;235&lt;/span&gt;  &lt;span class="m"&gt;259&lt;/span&gt;  &lt;span class="m"&gt;288&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;*************************
&lt;span class="m"&gt;15&lt;/span&gt;:50:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;195&lt;/span&gt;  &lt;span class="m"&gt;249&lt;/span&gt;  &lt;span class="m"&gt;274&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;************************
&lt;span class="m"&gt;15&lt;/span&gt;:55:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;220&lt;/span&gt;  &lt;span class="m"&gt;264&lt;/span&gt;  &lt;span class="m"&gt;302&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;**************************

&lt;span class="o"&gt;==&lt;/span&gt;&amp;gt; /tmp/ping.vpsold.txt &amp;lt;&lt;span class="o"&gt;==&lt;/span&gt;
&lt;span class="m"&gt;13&lt;/span&gt;:30:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;156&lt;/span&gt;  &lt;span class="m"&gt;159&lt;/span&gt;  &lt;span class="m"&gt;164&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;***************
&lt;span class="m"&gt;13&lt;/span&gt;:35:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;157&lt;/span&gt;  &lt;span class="m"&gt;160&lt;/span&gt;  &lt;span class="m"&gt;162&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;****************
&lt;span class="m"&gt;13&lt;/span&gt;:40:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;156&lt;/span&gt;  &lt;span class="m"&gt;160&lt;/span&gt;  &lt;span class="m"&gt;164&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;****************
&lt;span class="m"&gt;13&lt;/span&gt;:45:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;157&lt;/span&gt;  &lt;span class="m"&gt;160&lt;/span&gt;  &lt;span class="m"&gt;162&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;****************
&lt;span class="m"&gt;13&lt;/span&gt;:50:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;157&lt;/span&gt;  &lt;span class="m"&gt;159&lt;/span&gt;  &lt;span class="m"&gt;162&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;***************
&lt;span class="m"&gt;13&lt;/span&gt;:55:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;155&lt;/span&gt;  &lt;span class="m"&gt;159&lt;/span&gt;  &lt;span class="m"&gt;163&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;***************
&lt;span class="m"&gt;14&lt;/span&gt;:00:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;157&lt;/span&gt;  &lt;span class="m"&gt;160&lt;/span&gt;  &lt;span class="m"&gt;162&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;****************
&lt;span class="m"&gt;14&lt;/span&gt;:05:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;157&lt;/span&gt;  &lt;span class="m"&gt;160&lt;/span&gt;  &lt;span class="m"&gt;164&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;****************
&lt;span class="m"&gt;14&lt;/span&gt;:10:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;157&lt;/span&gt;  &lt;span class="m"&gt;160&lt;/span&gt;  &lt;span class="m"&gt;164&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;****************
&lt;span class="m"&gt;14&lt;/span&gt;:15:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;157&lt;/span&gt;  &lt;span class="m"&gt;159&lt;/span&gt;  &lt;span class="m"&gt;163&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;***************
&lt;span class="m"&gt;14&lt;/span&gt;:20:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;157&lt;/span&gt;  &lt;span class="m"&gt;160&lt;/span&gt;  &lt;span class="m"&gt;163&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;****************
&lt;span class="m"&gt;14&lt;/span&gt;:25:02  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;157&lt;/span&gt;  &lt;span class="m"&gt;160&lt;/span&gt;  &lt;span class="m"&gt;163&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;****************
&lt;span class="m"&gt;14&lt;/span&gt;:30:02  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;156&lt;/span&gt;  &lt;span class="m"&gt;159&lt;/span&gt;  &lt;span class="m"&gt;163&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;***************
&lt;span class="m"&gt;14&lt;/span&gt;:35:02  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;157&lt;/span&gt;  &lt;span class="m"&gt;160&lt;/span&gt;  &lt;span class="m"&gt;162&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;****************
&lt;span class="m"&gt;14&lt;/span&gt;:40:02  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;157&lt;/span&gt;  &lt;span class="m"&gt;159&lt;/span&gt;  &lt;span class="m"&gt;162&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;***************
&lt;span class="m"&gt;14&lt;/span&gt;:45:02  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;157&lt;/span&gt;  &lt;span class="m"&gt;159&lt;/span&gt;  &lt;span class="m"&gt;163&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;***************
&lt;span class="m"&gt;14&lt;/span&gt;:50:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;157&lt;/span&gt;  &lt;span class="m"&gt;160&lt;/span&gt;  &lt;span class="m"&gt;163&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;****************
&lt;span class="m"&gt;14&lt;/span&gt;:55:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;157&lt;/span&gt;  &lt;span class="m"&gt;160&lt;/span&gt;  &lt;span class="m"&gt;164&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;****************
&lt;span class="m"&gt;15&lt;/span&gt;:00:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;157&lt;/span&gt;  &lt;span class="m"&gt;159&lt;/span&gt;  &lt;span class="m"&gt;162&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;***************
&lt;span class="m"&gt;15&lt;/span&gt;:05:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;157&lt;/span&gt;  &lt;span class="m"&gt;160&lt;/span&gt;  &lt;span class="m"&gt;162&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;****************
&lt;span class="m"&gt;15&lt;/span&gt;:10:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;157&lt;/span&gt;  &lt;span class="m"&gt;159&lt;/span&gt;  &lt;span class="m"&gt;162&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;***************
&lt;span class="m"&gt;15&lt;/span&gt;:15:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;156&lt;/span&gt;  &lt;span class="m"&gt;160&lt;/span&gt;  &lt;span class="m"&gt;162&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;****************
&lt;span class="m"&gt;15&lt;/span&gt;:20:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;156&lt;/span&gt;  &lt;span class="m"&gt;159&lt;/span&gt;  &lt;span class="m"&gt;162&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;***************
&lt;span class="m"&gt;15&lt;/span&gt;:25:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;157&lt;/span&gt;  &lt;span class="m"&gt;160&lt;/span&gt;  &lt;span class="m"&gt;164&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;****************
&lt;span class="m"&gt;15&lt;/span&gt;:30:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;157&lt;/span&gt;  &lt;span class="m"&gt;166&lt;/span&gt;  &lt;span class="m"&gt;192&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;****************
&lt;span class="m"&gt;15&lt;/span&gt;:35:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;160&lt;/span&gt;  &lt;span class="m"&gt;190&lt;/span&gt;  &lt;span class="m"&gt;201&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;*******************
&lt;span class="m"&gt;15&lt;/span&gt;:40:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;157&lt;/span&gt;  &lt;span class="m"&gt;160&lt;/span&gt;  &lt;span class="m"&gt;162&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;****************
&lt;span class="m"&gt;15&lt;/span&gt;:45:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;155&lt;/span&gt;  &lt;span class="m"&gt;159&lt;/span&gt;  &lt;span class="m"&gt;162&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;***************
&lt;span class="m"&gt;15&lt;/span&gt;:50:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;157&lt;/span&gt;  &lt;span class="m"&gt;159&lt;/span&gt;  &lt;span class="m"&gt;162&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;***************
&lt;span class="m"&gt;15&lt;/span&gt;:55:01  &lt;span class="m"&gt;50&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;%  &lt;span class="m"&gt;156&lt;/span&gt;  &lt;span class="m"&gt;160&lt;/span&gt;  &lt;span class="m"&gt;176&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                          &lt;span class="p"&gt;|&lt;/span&gt;****************
&lt;/pre&gt;&lt;/div&gt;</content><category term="网络"></category><category term="ping"></category><category term="脚本"></category><category term="搬瓦工"></category></entry><entry><title>神奇的环境bug导致python3中出现udc开头字符串</title><link href="https://pythonwood.github.io/2018/11/%E7%A5%9E%E5%A5%87%E7%9A%84%E7%8E%AF%E5%A2%83bug%E5%AF%BC%E8%87%B4python3%E4%B8%AD%E5%87%BA%E7%8E%B0udc%E5%BC%80%E5%A4%B4%E5%AD%97%E7%AC%A6%E4%B8%B2/" rel="alternate"></link><published>2018-11-07T15:30:00+08:00</published><updated>2018-11-07T15:30:00+08:00</updated><author><name>pythonwood</name></author><id>tag:pythonwood.github.io,2018-11-07:/2018/11/神奇的环境bug导致python3中出现udc开头字符串/</id><summary type="html">&lt;h2 id="langzh_cnutf-8langen_usutf-8"&gt;注意：&lt;span class="caps"&gt;LANG&lt;/span&gt;=zh_CN.&lt;span class="caps"&gt;UTF&lt;/span&gt;-8与&lt;span class="caps"&gt;LANG&lt;/span&gt;=en_US.&lt;span class="caps"&gt;UTF&lt;/span&gt;-8不可混淆！&lt;a class="headerlink" href="#langzh_cnutf-8langen_usutf-8" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;&lt;span class="caps"&gt;LANG&lt;/span&gt;=zh_CN.&lt;span class="caps"&gt;UTF&lt;/span&gt;-8与&lt;span class="caps"&gt;LANG&lt;/span&gt;=en_US.&lt;span class="caps"&gt;UTF&lt;/span&gt;-8有区别&lt;/strong&gt; ，&amp;nbsp;所以不可混淆！想之前在python2时代吃过坑，没想到到了统一unicode的python3 …&lt;/p&gt;</summary><content type="html">&lt;h2 id="langzh_cnutf-8langen_usutf-8"&gt;注意：&lt;span class="caps"&gt;LANG&lt;/span&gt;=zh_CN.&lt;span class="caps"&gt;UTF&lt;/span&gt;-8与&lt;span class="caps"&gt;LANG&lt;/span&gt;=en_US.&lt;span class="caps"&gt;UTF&lt;/span&gt;-8不可混淆！&lt;a class="headerlink" href="#langzh_cnutf-8langen_usutf-8" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;&lt;span class="caps"&gt;LANG&lt;/span&gt;=zh_CN.&lt;span class="caps"&gt;UTF&lt;/span&gt;-8与&lt;span class="caps"&gt;LANG&lt;/span&gt;=en_US.&lt;span class="caps"&gt;UTF&lt;/span&gt;-8有区别&lt;/strong&gt; ，&amp;nbsp;所以不可混淆！想之前在python2时代吃过坑，没想到到了统一unicode的python3，因环境不一致也能导致编码问题！&lt;/p&gt;
&lt;h2 id="_1"&gt;当时环境与功能：&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;vps系统是ubutnu 14.04, 相关软件python3.4, selenium3+, chrome66, chromedriver。使用crontab启动shell， shell中启动python脚本，&amp;nbsp;脚本中selenium启动chrome，……&lt;/p&gt;
&lt;h2 id="bug"&gt;出bug的运行流程：&lt;a class="headerlink" href="#bug" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;crontab中的a.sh启动   &lt;strong&gt;&lt;span class="caps"&gt;LANG&lt;/span&gt;=zh_CN.&lt;span class="caps"&gt;UTF&lt;/span&gt;-8 bash&amp;nbsp;a.sh&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;a.sh末尾调用&amp;rdquo;b中文名.py&amp;rdquo;，&amp;nbsp;带中文参数&amp;rdquo;《xxx》&amp;rdquo;&lt;/li&gt;
&lt;li&gt;b中文.py 中print(参数1) 会异常显示字符串编码问题&amp;rsquo;ascii&amp;rsquo; codec can&amp;rsquo;t encode&amp;nbsp;characters&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="_2"&gt;调试发现:&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;print repr(中文参数1)， 会打印\udc&amp;nbsp;开头的而非\x开头的utf8型编码。&lt;/li&gt;
&lt;li&gt;比如&amp;rdquo;《&amp;rdquo; 正常编码是 &lt;strong&gt;&amp;lsquo;\xe3\x80\x8a&amp;rsquo;， 此处确是打印了&amp;rsquo;\udce3\udc80\udc8a&amp;rsquo;&lt;/strong&gt;&amp;nbsp;。&lt;/li&gt;
&lt;li&gt;改变逻辑，直接ssh到vps并执行 &lt;strong&gt;b中文.py 《xxx》&lt;/strong&gt;&amp;nbsp;没有问题！&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="_3"&gt;问题定位:&lt;a class="headerlink" href="#_3" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;个人本机ubuntu系统测试不会出现bug，vps才出现，所以应该是shell环境或者是python环境问题。&lt;/li&gt;
&lt;li&gt;打印执行a.sh的shell环境，对比发现本机有&lt;span class="caps"&gt;LANG&lt;/span&gt;=zh_CN.&lt;span class="caps"&gt;UTF&lt;/span&gt;-8和&lt;span class="caps"&gt;LANGUAGE&lt;/span&gt;=zh_CN:zh，vps仅有&lt;span class="caps"&gt;LANG&lt;/span&gt;=zh_CN.&lt;span class="caps"&gt;UTF&lt;/span&gt;-8。&lt;/li&gt;
&lt;li&gt;把crontab中强加的环境变量&lt;span class="caps"&gt;LANG&lt;/span&gt;=zh_CN.&lt;span class="caps"&gt;UTF&lt;/span&gt;-8去掉，此时a.sh的环境变量为&lt;span class="caps"&gt;LANG&lt;/span&gt;=en_US.&lt;span class="caps"&gt;UTF&lt;/span&gt;-8，&amp;nbsp;vps恢复正常。（2小时排查出结果了！）&lt;/li&gt;
&lt;li&gt;总结： 之前觉得&lt;span class="caps"&gt;LANG&lt;/span&gt;=zh_CN.&lt;span class="caps"&gt;UTF&lt;/span&gt;-8与&lt;span class="caps"&gt;LANG&lt;/span&gt;=en_US.&lt;span class="caps"&gt;UTF&lt;/span&gt;-8没什么不同，从此改观。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="_4"&gt;问题解决：&lt;a class="headerlink" href="#_4" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;去掉&lt;span class="caps"&gt;LANG&lt;/span&gt;=zh_CN.&lt;span class="caps"&gt;UTF&lt;/span&gt;-8，之后执行过程中会自动变成默认&lt;span class="caps"&gt;LANG&lt;/span&gt;=en_US.&lt;span class="caps"&gt;UTF&lt;/span&gt;-8&lt;/p&gt;
&lt;h2 id="_5"&gt;原因探究：&lt;a class="headerlink" href="#_5" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;待定&lt;/p&gt;
&lt;h2 id="python-reprudc-print"&gt;python repr输出udc开头字符串， print(参数)导致异常&lt;a class="headerlink" href="#python-reprudc-print" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;#39;/home/maskuser/path/to/ts/\udce3\udc80\udc8a\udce9\udc80\udc97.....mp4&amp;#39;

Traceback (most recent call last):
  File &amp;quot;/home/maskuser/pathtodir/script/20181105\udce8\udca7\udc86\.....py&amp;quot;, line 73, in &amp;lt;module&amp;gt;
    video_upload_testsite(*sys.argv[1:])
  File &amp;quot;/home/maskuser/pathtodir/script/20181105\udce8\udca7\udc86\.....py&amp;quot;, line 29, in video_upload_testsite
    print (videopath)
UnicodeEncodeError: &amp;#39;ascii&amp;#39; codec can&amp;#39;t encode characters in position 27-50: ordinal not in range(128)
&lt;/pre&gt;&lt;/div&gt;</content><category term="Ubuntu"></category><category term="linux"></category><category term="LANG"></category><category term="环境变量"></category><category term="python"></category></entry><entry><title>XUbuntu18.04（Bionic河狸）正式发布，系统安装升级记录</title><link href="https://pythonwood.github.io/2018/04/XUbuntu18.04%EF%BC%88Bionic%E6%B2%B3%E7%8B%B8%EF%BC%89%E6%AD%A3%E5%BC%8F%E5%8F%91%E5%B8%83%EF%BC%8C%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E5%8D%87%E7%BA%A7%E8%AE%B0%E5%BD%95/" rel="alternate"></link><published>2018-04-27T19:00:00+08:00</published><updated>2018-04-27T19:00:00+08:00</updated><author><name>pythonwood</name></author><id>tag:pythonwood.github.io,2018-04-27:/2018/04/XUbuntu18.04（Bionic河狸）正式发布，系统安装升级记录/</id><summary type="html">&lt;p&gt;Ubuntu&amp;nbsp;18.04发布时间是（美国）4月26号，彼时的中国已经是27号，就是今天。我花了一天时间折腾升级旧Ubuntu系统到刚发布的最新版。&lt;/p&gt;
&lt;p&gt;多年使用linux经验已经使得这个过程驾轻就熟，闲庭信步:)。为了不忘记，将有沉淀价值的部分，简要记录一下。&lt;/p&gt;
&lt;h2 id="linuxubuntu"&gt;偶然得知Linux，成为Ubuntu多年用户&lt;a class="headerlink" href="#linuxubuntu" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id="ubuntults"&gt;建议：只使用Ubuntu的&lt;span class="caps"&gt;LTS&lt;/span&gt;版本（长期维护 …&lt;/h3&gt;</summary><content type="html">&lt;p&gt;Ubuntu&amp;nbsp;18.04发布时间是（美国）4月26号，彼时的中国已经是27号，就是今天。我花了一天时间折腾升级旧Ubuntu系统到刚发布的最新版。&lt;/p&gt;
&lt;p&gt;多年使用linux经验已经使得这个过程驾轻就熟，闲庭信步:)。为了不忘记，将有沉淀价值的部分，简要记录一下。&lt;/p&gt;
&lt;h2 id="linuxubuntu"&gt;偶然得知Linux，成为Ubuntu多年用户&lt;a class="headerlink" href="#linuxubuntu" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id="ubuntults"&gt;建议：只使用Ubuntu的&lt;span class="caps"&gt;LTS&lt;/span&gt;版本（长期维护）&lt;a class="headerlink" href="#ubuntults" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;我的Ubuntu升级之路是10.04 -&amp;gt; 14.04 -&amp;gt; 18.0，中间的&lt;span class="caps"&gt;LTS&lt;/span&gt;版本12.04和16.04因在升级后不满意而没用，回滚恢复降版本。如果升级前没有备份，就没法恢复。系统升级前备份旧系统的准备很重要，让你可以安心折腾走得更远。这次也是花了很长时间全备份的。如果失败需要恢复系统可参考&lt;a href="https://pythonwood.github.io/2017/11/树莓派SD卡Linux系统盘复制，10分钟克隆新机/" title="树莓派SD卡Linux系统盘复制，10分钟克隆新机"&gt;关于linux系统备份与恢复的随笔&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="xubuntu1804bionic"&gt;期待已久的XUbuntu18.04（Bionic河狸）正式发布&lt;a class="headerlink" href="#xubuntu1804bionic" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;新系统意味着更好的驱动，更好的软件版本，比如ubuntu14.04驱动&lt;span class="caps"&gt;RTL8723BE&lt;/span&gt;这种网卡会偶尔掉线。不幸，我的一台笔记本就是&lt;span class="caps"&gt;RTL8723BE&lt;/span&gt;网卡的。显然大版本升级 14.04 -&amp;gt; 18.04 能巧妙地不折腾而解决很多旧问题（再比如http2支持）。因此，我是带着期待在等待Ubuntu18.04发布的，同时这次升级也没有退路（14.04太老了）。幸好，升级还算满意。已经用上了最新Ubuntu了，并且速度还可以，在换&lt;span class="caps"&gt;SSD&lt;/span&gt;盘后的酷睿I3老机上运行顺畅。&lt;/p&gt;
&lt;h4 id="ubuntu-1804-xubutnu"&gt;Ubuntu 18.04 桌面截图(XUbutnu)&lt;a class="headerlink" href="#ubuntu-1804-xubutnu" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;&lt;img alt="XUbutnu18.04桌面截图" src="https://pythonwood.github.io/uploads/2018/2018-04-27XUbutnu18.04桌面截图.jpg" title="XUbutnu18.04桌面截图"&gt;&lt;/p&gt;
&lt;h2 id="ubutnu1804-xfce"&gt;Ubutnu18.04安装升级过程 （Xfce版本）&lt;a class="headerlink" href="#ubutnu1804-xfce" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id="10-ubutnuxubuntu"&gt;1.0 选择并下载Ubutnu版本(XUbuntu)&lt;a class="headerlink" href="#10-ubutnuxubuntu" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;旧系统是配搭Xfce桌面的&lt;a href="https://pythonwood.github.io/2014/07/笔记本系统转换Linux一个半月——xubuntu14.04截图纪念里程碑/" title="xubuntu14.04截图纪念"&gt;XUbuntu14.04&lt;/a&gt;，Xfce同时也是Linus本人选择&lt;a href="https://linux.cn/article-202-1.html" title="Linus Torvalds 弃 GNOME 3 用 Xfce"&gt;Linus Torvalds 弃 &lt;span class="caps"&gt;GNOME&lt;/span&gt; 3 用 Xfce&lt;/a&gt;。XUbuntu里面的好软件有很多，比如文件管理器Thunar，截图软件xfce4-screenshooter，网速提示器xfce4-netload-plugin，&lt;span class="caps"&gt;CPU&lt;/span&gt;内存提示器xfce4-systemload-plugin等等。同时Ubuntu18的Xfce比原版&lt;span class="caps"&gt;ISO&lt;/span&gt;文件轻量很多。
&lt;img alt="Ubuntu18的Xfce比原版ISO文件轻量很多" src="https://pythonwood.github.io/uploads/2018/2018-04-27Ubuntu18的Xfce比原版ISO文件轻量很多.jpg"&gt;&lt;/p&gt;
&lt;h3 id="20"&gt;2.0 升级前先备份&lt;a class="headerlink" href="#20" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id="21-deb"&gt;2.1 备份已安装过的deb包名称列表&lt;a class="headerlink" href="#21-deb" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="nt"&gt;zcat&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;log&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;apt&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;history&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;log&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;gz&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="nt"&gt;grep&lt;/span&gt; &lt;span class="nt"&gt;Commandline&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="o"&gt;;&lt;/span&gt;  &lt;span class="nt"&gt;zcat&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;log&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;apt&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;history&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;log&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;gz&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="nt"&gt;grep&lt;/span&gt; &lt;span class="nt"&gt;Commandline&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;~/&lt;/span&gt;&lt;span class="nt"&gt;deb&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;list&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;txt&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="22-pythonrubyperl"&gt;2.2 备份已安装过的python包名称列表（无则忽略，ruby，perl等备份操作同理）&lt;a class="headerlink" href="#22-pythonrubyperl" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;( pip2 list ; pip3 list ) &amp;gt; ~/pip.list.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="23-etcvar-rootetcvar"&gt;2.3 /etc,/var一些关键目录备份, root权限执行（/etc是配置文件仓库，/var包含各用户的定时任务)&lt;a class="headerlink" href="#23-etcvar-rootetcvar" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cd /; sudo tar czf ~/etc.tar.gz etc var/spool/cron/crontabs
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="24"&gt;2.4 繁重但强烈建议的全盘备份&lt;a class="headerlink" href="#24" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;备份方法多种：rsync同步到安全盘备份 或 tar打包放到安全目录下 或&amp;nbsp;dd复制分区为文件保存到安全目录下。&lt;/p&gt;
&lt;h3 id="30"&gt;3.0 分区、格式化、安装&lt;a class="headerlink" href="#30" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id="31-ubuntu1804"&gt;3.1 方式一：从新硬盘或空白分区安装ubuntu18.04&lt;a class="headerlink" href="#31-ubuntu1804" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;linux分区不是越多越好的，推荐 / + /home 模式， 实用而不折腾，&amp;nbsp;一个分区代表系统，一个分区代表用户数据空间。这样的好处就是为后续升级带来方便。&lt;/p&gt;
&lt;p&gt;根 / 分区给15G已经完全足够，绰绰有余了。&amp;nbsp;把剩余空间都给/home，因为/分区使用量不会明显增加，/home分区放的东西却会成倍的增加。&lt;/p&gt;
&lt;p&gt;多年之后我目前用的分区方式，window与linux双系统共存的分区方式。msdos方式只能4主分区，刚好用完：
&lt;img alt="Ubuntu安装推荐分区" src="https://pythonwood.github.io/uploads/2018/2018-04-27Ubuntu安装推荐分区.jpg" title="Ubuntu安装推荐分区"&gt;&lt;/p&gt;
&lt;h4 id="32-linux"&gt;3.2 方式二：从旧linux系统升级&lt;a class="headerlink" href="#32-linux" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;告诫：不要尝试从命令&lt;code&gt;sudo apt-get dist-upgrade&lt;/code&gt;升级，结局一般都是不能自动处理错误而中止升级，系统可能因此寿终正寝，只留下无辜的你。这和不要尝试用系统升级方法装windows是一样的。&lt;/p&gt;
&lt;p&gt;参考升级方法：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;之前已有linux分区是 / + /home 模式，先把 &amp;ldquo;/&amp;rdquo; 所在分区格式化，然后将整个ubuntu18.04安装 &amp;ldquo;/&amp;rdquo;&amp;nbsp;所在区。&lt;/li&gt;
&lt;li&gt;系统安装后重启进入ubuntu18.04系统，原 &amp;ldquo;/home&amp;rdquo; 分区不会挂载。&amp;nbsp;总过程已经完成一半了。&lt;/li&gt;
&lt;li&gt;再挂载并将原 &amp;ldquo;/home&amp;rdquo; 分区清理瘦身一下，删除家目录中.thumbnails,&amp;nbsp;.cache这些可能冲突或不大重要的用户数据。&lt;/li&gt;
&lt;li&gt;将新/home目录内容rsync同步到旧 &amp;ldquo;/home&amp;rdquo;&amp;nbsp;分区所在目录里。&lt;/li&gt;
&lt;li&gt;修改/etc/fstab，增加1行让系统重启后挂载原 &amp;ldquo;/home&amp;rdquo;&amp;nbsp;盘。确认无误后重启就完成全部过程。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这样的好处是家目录中的图片、视频、工作文件、工作目录等用户资料依然在那里，变了的只是系统部分，优雅完成升级。&lt;/p&gt;
&lt;h3 id="40-ubuntu1804"&gt;4.0 安装Ubuntu18.04系统之后的优化&lt;a class="headerlink" href="#40-ubuntu1804" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id="41-ubuntu1804"&gt;4.1 Ubuntu18.04修改源&lt;a class="headerlink" href="#41-ubuntu1804" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;原来的url是cn.archive.ubuntu.com， 速度下载包时有&lt;span class="caps"&gt;3MB&lt;/span&gt;以上。其实不换也是可以的。&lt;/p&gt;
&lt;p&gt;如果要换， 以阿里举例， 修改/etc/apt/sources.list文件内容即可（修改前备份），&amp;nbsp;改其他第三方的同理该域名即可。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://mirrors.aliyun.com/ubuntu/&lt;/span&gt; &lt;span class="kp"&gt;bionic&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt; &lt;span class="kp"&gt;restricted&lt;/span&gt;

&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://mirrors.aliyun.com/ubuntu/&lt;/span&gt; &lt;span class="kp"&gt;bionic-updates&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt; &lt;span class="kp"&gt;restricted&lt;/span&gt;

&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://mirrors.aliyun.com/ubuntu/&lt;/span&gt; &lt;span class="kp"&gt;bionic&lt;/span&gt; &lt;span class="kp"&gt;universe&lt;/span&gt;
&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://mirrors.aliyun.com/ubuntu/&lt;/span&gt; &lt;span class="kp"&gt;bionic-updates&lt;/span&gt; &lt;span class="kp"&gt;universe&lt;/span&gt;

&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://mirrors.aliyun.com/ubuntu/&lt;/span&gt; &lt;span class="kp"&gt;bionic&lt;/span&gt; &lt;span class="kp"&gt;multiverse&lt;/span&gt;
&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://mirrors.aliyun.com/ubuntu/&lt;/span&gt; &lt;span class="kp"&gt;bionic-updates&lt;/span&gt; &lt;span class="kp"&gt;multiverse&lt;/span&gt;

&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://mirrors.aliyun.com/ubuntu/&lt;/span&gt; &lt;span class="kp"&gt;bionic-backports&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt; &lt;span class="kp"&gt;restricted&lt;/span&gt; &lt;span class="kp"&gt;universe&lt;/span&gt; &lt;span class="kp"&gt;multiverse&lt;/span&gt;

&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://mirrors.aliyun.com/ubuntu&lt;/span&gt; &lt;span class="kp"&gt;bionic-security&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt; &lt;span class="kp"&gt;restricted&lt;/span&gt;
&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://mirrors.aliyun.com/ubuntu&lt;/span&gt; &lt;span class="kp"&gt;bionic-security&lt;/span&gt; &lt;span class="kp"&gt;universe&lt;/span&gt;
&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://mirrors.aliyun.com/ubuntu&lt;/span&gt; &lt;span class="kp"&gt;bionic-security&lt;/span&gt; &lt;span class="kp"&gt;multiverse&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id="42-ubuntu1804"&gt;4.2 Ubuntu18.04调整用户界面、桌面工具栏、安装字体、重新安装历史包等&lt;a class="headerlink" href="#42-ubuntu1804" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id="421-xp"&gt;4.2.1 调整桌面工具栏到下面，下重上轻的风格看起来比较稳重。也是xp时代传下的习惯。&lt;a class="headerlink" href="#421-xp" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;h5 id="xubutnu1804ubuntubionic-beaver"&gt;&lt;strong&gt;XUbutnu18.04截图(Ubuntu)，这个版本别名&amp;rdquo;Bionic Beaver&amp;rdquo;仿生河狸&lt;/strong&gt;&lt;a class="headerlink" href="#xubutnu1804ubuntubionic-beaver" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h5&gt;
&lt;p&gt;&lt;img alt="XUbutnu18.04程序截图" src="https://pythonwood.github.io/uploads/2018/2018-04-27XUbutnu18.04程序截图.jpg" title="XUbutnu18.04程序截图"&gt;&lt;/p&gt;
&lt;h4 id="422-cpu"&gt;4.2.2 在桌面地板面板工具栏上，添加自定义显示比如网速，&lt;span class="caps"&gt;CPU&lt;/span&gt;，内存等。&lt;a class="headerlink" href="#422-cpu" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;添加网速提示器xfce4-netload-plugin，&lt;span class="caps"&gt;CPU&lt;/span&gt;内存提示器xfce4-systemload-plugin后的工具栏随时可获知负载网速这些计算机情况，用户体验比windows更赞！
&lt;img alt="XUbuntu已设置显示网速和CPU内存负载的工具栏" src="https://pythonwood.github.io/uploads/2018/2018-04-27XUbuntu已设置显示网速和CPU内存负载的工具栏.jpg" title="XUbuntu已设置显示网速和CPU内存负载的工具栏"&gt;&lt;/p&gt;
&lt;h4 id="423"&gt;4.2.3 安装谷歌拼音，文泉驿字体，调整系统字体大小等&lt;a class="headerlink" href="#423" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;Ubuntu18.04默认安装fcitx-sunpinyin也好用，用起来和googlepinyin差不多。所以……我还是选大款的好了。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get install fcitx-googlepinyin fonts-wqy*
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="424"&gt;4.2.4 安装以前安装过的软件&lt;a class="headerlink" href="#424" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;之前记录过旧系统安装的软件，现在按需安装回来。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;apt-get install gedit gthumb tmux vim-gtk3 python-pip python3-pip ipython ipython3 iotop iftop sysstat nload iptraf virtualbox virtualbox-ext-pack gparted testdisk fcitx-googlepinyin smplayer vlc gpaint xpaint pinta pelican python-bs4 axel aria2 unzip apt-file gimp remmina retext potool curl geoip-bin phantomjs lynx vim-tiny  gnome-disk-utility sqlite3 python-mysqldb python-pymysql kazam  pitivi gsound-tools flowblade mp3splt-gtk mp3wrap mtp-tools  adb cmake
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id="43-qqctrlaltalinuxxfce-screenshooterqq"&gt;4.3 实现&lt;span class="caps"&gt;QQ&lt;/span&gt;截图功能，快捷键Ctrl+Alt+A框选截屏。(linux下用xfce-screenshooter变身&lt;span class="caps"&gt;QQ&lt;/span&gt;截图神器)&lt;a class="headerlink" href="#43-qqctrlaltalinuxxfce-screenshooterqq" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;不需安装额外软件xfce-screenshooter是XUbuntu自带的，只需操作如下步骤： 打开设置-&amp;gt; 键盘 -&amp;gt; 应用程序快捷键 -&amp;gt; 添加。 然后命令框输入xfce4-screenshooter&amp;nbsp;&amp;ndash;region确认，再按住Ctrl+Alt+A，确认添加即可。&lt;/p&gt;
&lt;p&gt;xfce4-screenshooter这软件很赞，不需安装&lt;span class="caps"&gt;QQ&lt;/span&gt;就能有很好的截图体验。某些时候，linux用户体验可以比windows好，需要使用者本身已经对linux比较上手。
&lt;img alt="在Linux下设置QQ截图功能" src="https://pythonwood.github.io/uploads/2018/2018-04-27在Linux下设置QQ截图功能.jpg" title="在Linux下设置QQ截图功能"&gt;&lt;/p&gt;
&lt;h3 id="50-ubuntu1804"&gt;5.0 安装Ubuntu18.04系统之后的问题解决&lt;a class="headerlink" href="#50-ubuntu1804" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id="51-ubuntu1804shadowsocks"&gt;5.1 Ubuntu18.04启动shadowsocks报错解决&lt;a class="headerlink" href="#51-ubuntu1804shadowsocks" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;原因：openssl升级到1.1.0以上版本，导致shadowsocks启动报undefined symbol:&amp;nbsp;EVP_CIPHER_CTX_cleanup错误&lt;/p&gt;
&lt;p&gt;解决：&amp;nbsp;将py文件中所有的EVP_CIPHER_CTX_cleanup改为EVP_CIPHER_CTX_reset&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo vim /usr/local/lib/python2.7/dist-packages/shadowsocks/crypto/openssl.py  # 按实际路径改
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="52-ubuntu1804wpserror-while-loading-shared-libraries-libpng12so0"&gt;5.2 Ubuntu18.04安装wps（解决报错error while loading shared libraries: libpng12.so.0)&lt;a class="headerlink" href="#52-ubuntu1804wpserror-while-loading-shared-libraries-libpng12so0" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;第一步下载wps-office_10.1.0.5672~a21_amd64.deb, libpng12-0_1.2.54-1ubuntu1_amd64.deb,&amp;nbsp;wps_symbol_fonts.zip（window字体非必须）文件备用。&lt;/p&gt;
&lt;p&gt;第二步运行命令安装：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo dpkg -i wps-office_10.1.0.5672~a21_amd64.deb libpng12-0_1.2.54-1ubuntu1_amd64.deb
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="53-panel"&gt;5.3 底部面板panel出现重复的网络图标解决&lt;a class="headerlink" href="#53-panel" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;&lt;img alt="panel面板重复出现network图标" src="https://pythonwood.github.io/uploads/2018/2018-05-09面板显示重复网络图标.png" title="panel面板重复出现network图标"&gt;&lt;/p&gt;
&lt;p&gt;解决：设置 - 会话与启动 - 程序自启动 - 取消勾选network项。 注销，再登录，重新勾选，注销，再登录。&amp;nbsp;图标恢复只有一个。&lt;/p&gt;
&lt;h3 id="60-ubuntu1804"&gt;6.0 安装Ubuntu18.04总结提升&lt;a class="headerlink" href="#60-ubuntu1804" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;升级过程比较有把握，遇到的问题都是典型缺so文件这些小问题，通过谷歌搜索就能解决。&lt;/p&gt;
&lt;p&gt;某些时候，linux用户体验可以比windows好，需要使用者本身已经对linux比较上手。&lt;/p&gt;</content><category term="Ubuntu"></category><category term="18.04"></category><category term="linux"></category><category term="系统"></category><category term="安装"></category></entry><entry><title>实测家庭电器电功率记录——节约用电支持环保</title><link href="https://pythonwood.github.io/2018/04/%E5%AE%9E%E6%B5%8B%E5%AE%B6%E5%BA%AD%E7%94%B5%E5%99%A8%E7%94%B5%E5%8A%9F%E7%8E%87%E8%AE%B0%E5%BD%95%E2%80%94%E2%80%94%E8%8A%82%E7%BA%A6%E7%94%A8%E7%94%B5%E6%94%AF%E6%8C%81%E7%8E%AF%E4%BF%9D/" rel="alternate"></link><published>2018-04-20T15:16:00+08:00</published><updated>2018-04-20T15:16:00+08:00</updated><author><name>pythonwood</name></author><id>tag:pythonwood.github.io,2018-04-20:/2018/04/实测家庭电器电功率记录——节约用电支持环保/</id><summary type="html">&lt;p&gt;家用电器经常待机，手机插头不拔，长期旅行不清空冰箱不关总闸，我一直认为浪费电但没有具体量化的认知。最近下决心花36元来记录电器的耗电功率排行。具体就是买了个可以显示耗电快慢的&lt;a href="https://s.click.taobao.com/t?e=m%3D2%26s%3DNYboi0mHsGQcQipKwQzePOeEDrYVVa64K7Vc7tFgwiHjf2vlNIV67rTJ9qRSwRX4jGYPrSmetxGs9V29auOuBOBgn3DwXo5fs9cRaxJdiKw3LnkA3bZiA5IdTsHekIOqQxPkL4fipmEcVFeZKQgm4n%2BucW%2B%2Fygb8cSpj5qSCmbA%3D&amp;amp;pvid=10_120.239.178.83_3183_1524209142036" title="家用电功率计量插座"&gt;家用电功率计量插座&lt;/a&gt;，然后花了些时间测量数据并记录下来。随用随测出结果，十分好用。&lt;/p&gt;
&lt;h3 id="_1"&gt;实测过程&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img alt="电功率插座显示插头纯消耗功率是0.5W" src="https://pythonwood.github.io/uploads/2018/电功率插座显示插头纯消耗功率是0.5W.jpg" title="电功率插座显示插头纯消耗功率是0.5W"&gt;&lt;/p&gt;
&lt;p&gt;插座本身很小，测试过程非常方便。插上就实时显示电功率，按上下可切换显示电压，频率，时间，功率因素等。&lt;/p&gt;
&lt;p&gt;孔位不多没有关系，可加一个排插测出总电功率就好 …&lt;/p&gt;</summary><content type="html">&lt;p&gt;家用电器经常待机，手机插头不拔，长期旅行不清空冰箱不关总闸，我一直认为浪费电但没有具体量化的认知。最近下决心花36元来记录电器的耗电功率排行。具体就是买了个可以显示耗电快慢的&lt;a href="https://s.click.taobao.com/t?e=m%3D2%26s%3DNYboi0mHsGQcQipKwQzePOeEDrYVVa64K7Vc7tFgwiHjf2vlNIV67rTJ9qRSwRX4jGYPrSmetxGs9V29auOuBOBgn3DwXo5fs9cRaxJdiKw3LnkA3bZiA5IdTsHekIOqQxPkL4fipmEcVFeZKQgm4n%2BucW%2B%2Fygb8cSpj5qSCmbA%3D&amp;amp;pvid=10_120.239.178.83_3183_1524209142036" title="家用电功率计量插座"&gt;家用电功率计量插座&lt;/a&gt;，然后花了些时间测量数据并记录下来。随用随测出结果，十分好用。&lt;/p&gt;
&lt;h3 id="_1"&gt;实测过程&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img alt="电功率插座显示插头纯消耗功率是0.5W" src="https://pythonwood.github.io/uploads/2018/电功率插座显示插头纯消耗功率是0.5W.jpg" title="电功率插座显示插头纯消耗功率是0.5W"&gt;&lt;/p&gt;
&lt;p&gt;插座本身很小，测试过程非常方便。插上就实时显示电功率，按上下可切换显示电压，频率，时间，功率因素等。&lt;/p&gt;
&lt;p&gt;孔位不多没有关系，可加一个排插测出总电功率就好。&lt;/p&gt;
&lt;p&gt;但很可惜，最想测试的电热水器因为插孔为非普标的，所以没能测试。&lt;/p&gt;
&lt;h3 id="_2"&gt;电器功耗实测记录表&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;常用电器元件&lt;/th&gt;
&lt;th&gt;耗电功率&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;树莓派&lt;/td&gt;
&lt;td&gt;4.5W (开机过程8W)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;笔记本电脑&lt;/td&gt;
&lt;td&gt;10W  (开机过程20W)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;手机充电器&lt;/td&gt;
&lt;td&gt;0W   (充电时2W)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;排插&lt;/td&gt;
&lt;td&gt;0.5W&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;低音音箱&lt;/td&gt;
&lt;td&gt;15W&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;hp打印机&lt;/td&gt;
&lt;td&gt;1W   (A4打印时10W)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;广电机顶盒&lt;/td&gt;
&lt;td&gt;7W&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;tplink路由&lt;/td&gt;
&lt;td&gt;2.4W&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;上网猫&lt;/td&gt;
&lt;td&gt;3W&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;oye路由&lt;/td&gt;
&lt;td&gt;1.5W&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;电风扇待机&lt;/td&gt;
&lt;td&gt;0W&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="_3"&gt;电功率综述&lt;a class="headerlink" href="#_3" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;插座本身通电下就要浪费0.5W。（和预测相反）&lt;/li&gt;
&lt;li&gt;手机充电器一直插着是0W，以后再不怕浪费电了。（和预测相反）&lt;/li&gt;
&lt;li&gt;猜测刷了openwrt的路由可能比很多厂商路由省电。比起功能复杂的路由，我更偏向选择功耗低的。&lt;/li&gt;
&lt;li&gt;猫、机顶盒确实是耗电大户，电费隐形杀手。（符合预测）&lt;/li&gt;
&lt;li&gt;笔记本电脑功耗甚至比台式电脑的单个组成部分音箱还低，所以买电脑选择笔记本重要原因之一是省电。按台式机60W估算一年下来，省下的电费是很可观的。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="_4"&gt;附上原始笔记&lt;a class="headerlink" href="#_4" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img alt="家用电器功率记录原始笔记" src="https://pythonwood.github.io/uploads/2018/家用电器功率记录原始笔记.jpg" title="家用电器功率记录原始笔记"&gt;&lt;/p&gt;
&lt;h3 id="_5"&gt;总结&lt;a class="headerlink" href="#_5" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;最近物联网、智能家居很火，有很多商家向消费者推销产品只重功能不重功耗。典型例子就是路由器做了很多不应该做的事情，路由器功能越丰富，就越费电。另外一个例子是智能插座，插座变成微型电脑，连接wifi以便于手机远程开断插头电源。本身这个idea就比较有争议，而且耗电大增，我不看好其发展。现在提倡环保，资源越来越紧张，希望在选购商品时，为环境多考虑一分。能节约用电的地方尽量节约。&lt;/p&gt;
&lt;h3 id="_6"&gt;参考&lt;a class="headerlink" href="#_6" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;</content><category term="环保"></category><category term="电器"></category><category term="节约"></category></entry></feed>